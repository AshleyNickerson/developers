<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/Article">
  
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"/>

  <title>Plugins - Request Transformer | Qordoba - Strings Intelligence Platform..</title>
  <meta name="description" content="Create a fully automated strings management solution">
  <meta name="author" content="Qordoba"/>
  <meta property="og:title" content="Strings Intelligence Platform.."/>
  <meta property="og:site_name" content="Qordoba"/>
  <link rel="prefetch" href="/assets/images/qordoba-white-logo.png" /><link rel="prefetch" href="/assets/images/icons/plugins/request-transformer.png" /><link rel="prefetch" href="/assets/images/qordobalogoblue.png" /><link rel="dns-prefetch" href="https://buttons.github.io" /><link rel="dns-prefetch" href="https://platform.twitter.com" /><link rel="dns-prefetch" href="https://connect.facebook.net" /><link rel="dns-prefetch" href="//mashape.github.io" />
  <link rel="icon" type="image/x-icon" href="/assets/images/favicon.png"/>
  <link rel="stylesheet" href="/assets/styles.css?v=1529004062"/>
</head>


  <body id="page-plugin" >
    <header class="site-header">
  <div class="enterprise">
        <div class="container">
       <nav class="enterprise-sites one-half column">
         <ul>
           <li>
             <a href="https://qordoba.com/customers/" target="_blank">Customers</a>
           </li>
           <li>
             <a href="https://qordoba.com/partners/" target="_blank" >Partners</a>
           </li>
         </ul>
       </nav>   
      <nav class="enterprise-contact one-half column">
        <ul>
          <li>
            <a href="https://support.qordoba.com/" target="_blank">Support</a>
          </li>
          <li>
            <a href="http://go.qordoba.com/WF-Request-A-Demo__LP-DevDocs-Header.html">Request Demo</a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
  <!-- .enterprise -->
  <div class="navbar">
    <div class="container">
      <a href="/" class="navbar-brand">
        <img src="/assets/images/qordoba-white-logo.png" alt="Qordoba" style="height: 35px;" >
      </a>
      <button data-toggle="collapse" data-target="#navbar" aria-expanded="true" aria-controls="navbar" class="navbar-toggle">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <nav id="navbar" class="navbar-nav">
        <ul>
          <li>
            <a href="/docs/" >Docs</a>
          </li>
          <li>
            <a href="/ecosystem" >Ecosystem</a>
          </li>
          <li>
            <a href="/security/" >Security</a>
          </li>
          <li>
            <a href="https://github.com/Qordobacode/" target="_blank">Code</a>
          </li>
           <li>
            <a href="/api/" >API</a>
          </li>
          <li>
            <a href="/install" class="button button-dark" data-analytics='{"event": "Clicked download", "type": "button", "location": "header"}'>Installation</a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
  <!-- .navbar -->
</header>


    <div class="page page-plugin">
  
  <header class="page-header">
    <div class="container">
      
        <div class="page-header-icon">
          <img src="/assets/images/icons/plugins/request-transformer.png" alt="" />
        </div>
      

      <div class="page-header-title">
        
          <ul class="breadcrumbs">
            
              <li class="breadcrumb-item">
                
                <a href="/ecosystem">Ecosystem</a>
                
              </li>
            
          </ul>
        

        <h1>Request Transformer</h1>

        
      </div>

      

      
    </div>
  </header>



  <div class="container">
    <div class="content">
      <p>Transform the request sent by a client on the fly on Qordoba, before hitting the upstream server.</p>

<hr>

<h2 id="configuration">Configuration</h2>

<p>Configuring the plugin is as simple as a single API call, you can configure and enable it for your <a href="/docs/latest/admin-api/#api-object">API</a> (or <a href="/docs/latest/admin-api/#consumer-object">Consumer</a>) by executing the following request on your Qordoba server:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>curl -X POST http://qordoba:8001/apis/<span class="o">{</span>api<span class="o">}</span>/plugins <span class="se">\</span>
    --data <span class="s2">"name=request-transformer"</span> <span class="se">\</span>
    --data <span class="s2">"config.add.headers[1]=x-new-header:some,value"</span> <span class="se">\</span>
    --data <span class="s2">"config.add.headers[2]=x-another-header:some,value"</span> <span class="se">\</span>
    --data <span class="s2">"config.add.querystring=new-param:some_value, another-param:some_value"</span> <span class="se">\</span>
    --data <span class="s2">"config.add.body=new-form-param:some_value, another-form-param:some_value"</span> <span class="se">\</span>
    --data <span class="s2">"config.rename.headers=header-old-name:header-new-name, another-old-name:another-new-name"</span> <span class="se">\</span>
    --data <span class="s2">"config.rename.querystring=qs-old-name:qs-new-name, qs2-old-name:qs2-new-name"</span> <span class="se">\</span>
    --data <span class="s2">"config.rename.body=param-old:param-new, param2-old:param2-new"</span> <span class="se">\</span>
    --data <span class="s2">"config.remove.headers=x-toremove, x-another-one"</span> <span class="se">\</span>
    --data <span class="s2">"config.remove.querystring=param-toremove, param-another-one"</span> <span class="se">\</span>
    --data <span class="s2">"config.remove.body=formparam-toremove, formparam-another-one"</span>
</code></pre></div>
<p>Note: if the value contains a <code>,</code> then the comma separated format cannot be used. The array notation must be used instead.</p>

<p><code>api</code>: The <code>id</code> or <code>name</code> of the API that this plugin configuration will target</p>

<p>You can also apply it for every API using the <code>http://qordoba:8001/plugins/</code> endpoint. Read the <a href="/docs/latest/admin-api/#add-plugin">Plugin Reference</a> for more information.</p>

<table><thead>
<tr>
<th style="text-align: right">form parameter</th>
<th>default</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>name</code></td>
<td></td>
<td>Name of the plugin to use, in this case: <code>request-transformer</code></td>
</tr>
<tr>
<td style="text-align: right"><code>consumer_id</code><br><em>optional</em></td>
<td></td>
<td>The CONSUMER ID that this plugin configuration will target. This value can only be used if <a href="/about/faq/#how-can-i-add-an-authentication-layer-on-a-microservice/api?">authentication has been enabled</a> so that the system can identify the user making the request.</td>
</tr>
<tr>
<td style="text-align: right"><code>config.http_method</code><br><em>optional</em></td>
<td></td>
<td>Changes the HTTP method for the upstream request.</td>
</tr>
<tr>
<td style="text-align: right"><code>config.remove.headers</code><br><em>optional</em></td>
<td></td>
<td>List of header names. Unset the headers with the given name.</td>
</tr>
<tr>
<td style="text-align: right"><code>config.remove.querystring</code><br><em>optional</em></td>
<td></td>
<td>List of querystring names. Remove the querystring if it is present.</td>
</tr>
<tr>
<td style="text-align: right"><code>config.remove.body</code><br><em>optional</em></td>
<td></td>
<td>List of parameter names. Remove the parameter if and only if content-type is one the following [<code>application/json</code>, <code>multipart/form-data</code>,  <code>application/x-www-form-urlencoded</code>] and parameter is present.</td>
</tr>
<tr>
<td style="text-align: right"><code>config.replace.headers</code><br><em>optional</em></td>
<td></td>
<td>List of headername:value pairs. If and only if the header is already set, replace its old value with the new one. Ignored if the header is not already set.</td>
</tr>
<tr>
<td style="text-align: right"><code>config.replace.querystring</code><br><em>optional</em></td>
<td></td>
<td>List of queryname:value pairs. If and only if the field name is already set, replace its old value with the new one. Ignored if the field name is not already set.</td>
</tr>
<tr>
<td style="text-align: right"><code>config.rename.headers</code><br><em>optional</em></td>
<td></td>
<td>List of headername:value pairs. If and only if the header is already set, rename the header. The value is unchanged. Ignored if the header is not already set.</td>
</tr>
<tr>
<td style="text-align: right"><code>config.rename.querystring</code><br><em>optional</em></td>
<td></td>
<td>List of queryname:value pairs. If and only if the field name is already set, rename the field name. The value is unchanged. Ignored if the field name is not already set.</td>
</tr>
<tr>
<td style="text-align: right"><code>config.rename.body</code><br><em>optional</em></td>
<td></td>
<td>List of parameter name:value pairs. Rename the parameter name if and only if content-type is one the following [<code>application/json</code>, <code>multipart/form-data</code>,  <code>application/x-www-form-urlencoded</code>] and parameter is present.</td>
</tr>
<tr>
<td style="text-align: right"><code>config.replace.body</code><br><em>optional</em></td>
<td></td>
<td>List of paramname:value pairs. If and only if content-type is one the following [<code>application/json</code>, <code>multipart/form-data</code>, <code>application/x-www-form-urlencoded</code>] and the parameter is already present, replace its old value with the new one. Ignored if the parameter is not already present.</td>
</tr>
<tr>
<td style="text-align: right"><code>config.add.headers</code><br><em>optional</em></td>
<td></td>
<td>List of headername:value pairs. If and only if the header is not already set, set a new header with the given value. Ignored if the header is already set.</td>
</tr>
<tr>
<td style="text-align: right"><code>config.add.querystring</code><br><em>optional</em></td>
<td></td>
<td>List of queryname:value pairs. If and only if the querystring is not already set, set a new querystring with the given value. Ignored if the header is already set.</td>
</tr>
<tr>
<td style="text-align: right"><code>config.add.body</code><br><em>optional</em></td>
<td></td>
<td>List of pramname:value pairs. If and only if content-type is one the following [<code>application/json</code>, <code>multipart/form-data</code>, <code>application/x-www-form-urlencoded</code>] and the parameter is not present, add a new parameter with the given value to form-encoded body. Ignored if the parameter is already present.</td>
</tr>
<tr>
<td style="text-align: right"><code>config.append.headers</code><br><em>optional</em></td>
<td></td>
<td>List of headername:value pairs. If the header is not set, set it with the given value. If it is already set, an additional new header with the same name and the new value will be appended.</td>
</tr>
<tr>
<td style="text-align: right"><code>config.append.querystring</code><br><em>optional</em></td>
<td></td>
<td>List of queryname:value pairs. If the querystring is not set, set it with the given value. If it is already set, a new querystring with the same name and the new value will be set.</td>
</tr>
<tr>
<td style="text-align: right"><code>config.append.body</code><br><em>optional</em></td>
<td></td>
<td>List of paramname:value pairs. If the content-type is one the following [<code>application/json</code>, <code>application/x-www-form-urlencoded</code>], add a new parameter with the given value if the parameter is not present, otherwise if it is already present, the two values (old and new) will be aggregated in an array.</td>
</tr>
</tbody></table>

<h3 id="dynamic-transformation-based-on-request-content">Dynamic Transformation Based on Request Content</h3>

<p>The Request Transformer plugin bundled with Mashape Enterprise Edition allows for
adding or replacing content in the upstream request based on variable data found
in the client request, such as request headers, query string parameters, or URI
parameters as defined by a URI capture group.</p>

<p>If you already are a Mashape Enterprise customer, you can request access to this
plugin functionality by opening a support ticket using your Enterprise support
channels.</p>

<p>If you are not a Mashape Enterprise customer, you can inquire about our
Enterprise offering by <a href="/enterprise">contacting us</a>.</p>

<h2 id="order-of-execution">Order of execution</h2>

<p>Plugin performs the response transformation in following order</p>

<p>remove --&gt; rename --&gt; replace --&gt; add --&gt; append</p>

<h2 id="examples">Examples</h2>

<ul>
<li>Add multiple headers by passing each header:value pair separately:</li>
</ul>
<div class="highlight"><pre><code class="language-" data-lang="">$ curl -X POST http://localhost:8001/apis/mockbin/plugins \
  --data "name=request-transformer" \
  --data "config.add.headers[1]=h1:v1" \
  --data "config.add.headers[2]=h2:v1"
</code></pre></div>
<table><thead>
<tr>
<th>incoming request headers</th>
<th>upstream proxied headers:</th>
</tr>
</thead><tbody>
<tr>
<td>h1: v1</td>
<td><ul><li>h1: v1</li><li>h2: v1</li></ul></td>
</tr>
</tbody></table>

<hr>

<ul>
<li>Add multiple headers by passing comma separated header:value pair:</li>
</ul>
<div class="highlight"><pre><code class="language-" data-lang="">$ curl -X POST http://localhost:8001/apis/mockbin/plugins \
  --data "name=request-transformer" \
  --data "config.add.headers=h1:v1,h2:v2"
</code></pre></div>
<table><thead>
<tr>
<th>incoming request headers</th>
<th>upstream proxied headers:</th>
</tr>
</thead><tbody>
<tr>
<td>h1: v1</td>
<td><ul><li>h1: v1</li><li>h2: v1</li></ul></td>
</tr>
</tbody></table>

<hr>

<ul>
<li>Add multiple headers passing config as JSON body:</li>
</ul>
<div class="highlight"><pre><code class="language-" data-lang="">$ curl -X POST http://localhost:8001/apis/mockbin/plugins \
  --header 'content-type: application/json' \
  --data '{"name": "request-transformer", "config": {"add": {"headers": ["h1:v2", "h2:v1"]}}}'
</code></pre></div>
<table><thead>
<tr>
<th>incoming request headers</th>
<th>upstream proxied headers:</th>
</tr>
</thead><tbody>
<tr>
<td>h1: v1</td>
<td><ul><li>h1: v1</li><li>h2: v1</li></ul></td>
</tr>
</tbody></table>

<hr>

<ul>
<li>Add a querystring and a header:</li>
</ul>
<div class="highlight"><pre><code class="language-" data-lang="">$ curl -X POST http://localhost:8001/apis/mockbin/plugins \
  --data "name=request-transformer" \
  --data "config.add.querystring=q1:v2,q2=v1" \
  --data "config.add.headers=h1:v1"
</code></pre></div>
<table><thead>
<tr>
<th>incoming request headers</th>
<th>upstream proxied headers:</th>
</tr>
</thead><tbody>
<tr>
<td>h1: v2</td>
<td><ul><li>h1: v2</li><li>h2: v1</li></ul></td>
</tr>
<tr>
<td>h3: v1</td>
<td><ul><li>h1: v1</li><li>h2: v1</li><li>h3: v1</li></ul></td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>incoming request querystring</th>
<th>upstream proxied querystring</th>
</tr>
</thead><tbody>
<tr>
<td>\?q1=v1</td>
<td>\?q1=v1&amp;q2=v1</td>
</tr>
<tr>
<td>-</td>
<td>\?q1=v2&amp;q2=v1</td>
</tr>
</tbody></table>

<hr>

<ul>
<li>Append multiple headers and remove a body parameter:</li>
</ul>
<div class="highlight"><pre><code class="language-" data-lang="">$ curl -X POST http://localhost:8001/apis/mockbin/plugins \
  --header 'content-type: application/json' \
  --data '{"name": "request-transformer", "config": {"append": {"headers": ["h1:v2", "h2:v1"]}, "remove": {"body": ["p1"]}}}'
</code></pre></div>
<table><thead>
<tr>
<th>incoming request headers</th>
<th>upstream proxied headers:</th>
</tr>
</thead><tbody>
<tr>
<td>h1: v1</td>
<td><ul><li>h1: v1</li><li>h1: v2</li><li>h2: v1</li></ul></td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>incoming url encoded body</th>
<th>upstream proxied url encoded body:</th>
</tr>
</thead><tbody>
<tr>
<td>p1=v1&amp;p2=v1</td>
<td>p2=v1</td>
</tr>
<tr>
<td>p2=v1</td>
<td>p2=v1</td>
</tr>
</tbody></table>

    </div>
  </div>
</div>


    
  <!-- section class="section subscribe-section" id="newsletter">
  <div class="container">
    <header class="section-header">
      <h4>Keep up with the latest features</h4>
    </header>

    <div class="row">
      <div class="one-half column offset-by-three">

      </div>
    </div>
  </div>
</section -->


<footer class="marketing-footer--light-gray">
  <section>
    <ul>
      <li class="logo-wrapper">
        <div class="logo">
          <img src="/assets/images/qordobalogoblue.png" alt="Qordoba" >
        </div>
      </li>
      <li>
        <nav>
          <h4>Use Cases</h4>
          <ul>
            <li><a href="#">Strings Management</a></li>
            <li><a href="#">Content AI</a></li>
            <li><a href="#">Localization</a></li>
            <li><a href="#">Persona Based Content</a></li>

          </ul>
        </nav>
      </li>
      <li>
        <nav>
          <h4>Support</h4>
          <ul>
            <li><a href="https://support.qordoba.com/">Knowledge Base</a></li>
            <li><a href="https://dev.qordoba.com/glossary/">Glossary of Qordoba Terms</a></li>
            <li><a href="https://www.youtube.com/channel/UC_ZMLcfNI1XQnV8frpeFsgA">Webinars</a></li>
            <li><a href="https://www.youtube.com/channel/UC_ZMLcfNI1XQnV8frpeFsgA">Tutorials</a></li>
          </ul>
        </nav>
      </li>
      <li>
        <nav>
          <h4>Network Status</h4>
          <ul>
            <li><a href="https://status.qordoba.com/">APIs</a></li>
            <li><a href="https://status.qordoba.com/">SmartSuggest</a></li>
            <li><a href="https://status.qordoba.com/">Emotion and Tone</a></li>
          </ul>
        </nav>
      </li>
      <li>
        <nav>
          <h4>Legal</h4>
          <ul>
            <li><a href="#">Terms of Service</a></li>
            <li><a href="#">Privacy Policy</a></li>
          </ul>
        </nav>
      </li>
    </ul>
  </section>

  <section class="legal">
    <ul>
      <li>
        <span class="mashape-footer-content">&copy; Qordoba. 2018</span>
      </li>
      <li>
        <div class="social-link">
          <a href="https://github.com/Qordobacode" title="Github"><i aria-label="Github" class="fa fa-github" aria-hidden="true"></i></a></div>
        <div class="social-link">
          <a href="https://twitter.com/qordoba" title="Twitter"><i aria-label="Twitter" class="fa fa-twitter" aria-hidden="true"></i></a>
        </div>
      </li>
    </ul>
  </section>
</footer>

    <script>
  var anchorForId = function (id) {
    var anchor = document.createElement("a");
    anchor.className = "header-link";
    anchor.href      = "#" + id;
    anchor.innerHTML = "<span class=\"sr-only\">Permalink</span><i class=\"fa fa-link\"></i>";
    anchor.title = "Permalink";
    return anchor;
  };
  var linkifyAnchors = function (level, containingElement) {
    var headers = containingElement.getElementsByTagName("h" + level);
    for (var h = 0; h < headers.length; h++) {
      var header = headers[h];
      if (typeof header.id !== "undefined" && header.id !== "") {
        header.prepend(anchorForId(header.id));
      }
    }
  };
  document.onreadystatechange = function () {
    if (this.readyState === "complete") {
      console.log("here")
      var contentBlock = document.getElementById("documentation");
      if (!contentBlock) {
        return;
      }
      for (var level = 1; level <= 6; level++) {
        linkifyAnchors(level, contentBlock);
      }
    }
  };
</script>


    <script src="/assets/app.js?v=1529004062"></script>

    <div id="fb-root"></div>

    <script id="github-bjs" src="https://buttons.github.io/buttons.js" async defer></script>
    <script id="twitter-wjs" type="text/javascript" src="https://platform.twitter.com/widgets.js" async defer></script>
    <script id="facebook-jssdk" type="text/javascript" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.3&appId=842731852424506" async defer></script>

    <script type="text/javascript">
      piAId = '393112';
      piCId = '48375';

      (function() {
        function async_load(){
          var s = document.createElement('script'); s.type = 'text/javascript';
          s.src = ('https:' == document.location.protocol ? 'https://pi' : 'http://cdn') + '.pardot.com/pd.js';
          var c = document.getElementsByTagName('script')[0]; c.parentNode.insertBefore(s, c);
        }
        if(window.attachEvent) { window.attachEvent('onload', async_load); }
        else { window.addEventListener('load', async_load, false); }
      })();
    </script>

    <script type='text/javascript'>
      var _vwo_code=(function(){
      var account_id=125292,
      settings_tolerance=2000,
      library_tolerance=2500,
      use_existing_jquery=true,
      // DO NOT EDIT BELOW THIS LINE
      f=false,d=document;return{use_existing_jquery:function(){return use_existing_jquery;},library_tolerance:function(){return library_tolerance;},finish:function(){if(!f){f=true;var a=d.getElementById('_vis_opt_path_hides');if(a)a.parentNode.removeChild(a);}},finished:function(){return f;},load:function(a){var b=d.createElement('script');b.src=a;b.type='text/javascript';b.innerText;b.onerror=function(){_vwo_code.finish();};d.getElementsByTagName('head')[0].appendChild(b);},init:function(){settings_timer=setTimeout('_vwo_code.finish()',settings_tolerance);this.load('//dev.visualwebsiteoptimizer.com/j.php?a='+account_id+'&u='+encodeURIComponent(d.URL)+'&r='+Math.random());var a=d.createElement('style'),b='',h=d.getElementsByTagName('head')[0];a.setAttribute('id','_vis_opt_path_hides');a.setAttribute('type','text/css');if(a.styleSheet)a.styleSheet.cssText=b;else a.appendChild(d.createTextNode(b));h.appendChild(a);return settings_timer;}};}());_vwo_settings_timer=_vwo_code.init();
    </script>

    <script type="text/javascript">
      !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.0.1";
        analytics.load("WDj0nSS7hpyxwL3evgbOzK755s0NUye6");
        analytics.page()
      }}();
    </script>

    <script type="text/javascript" src="//mashape.github.io/notification-bar/embed.js" async defer></script>
  </body>
</html>
