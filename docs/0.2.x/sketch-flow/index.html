<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/Article">
  
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"/>

  <title>Admin API - v0.2.x | Qordoba - Strings Intelligence Platform..</title>
  <meta name="description" content="Create a fully automated strings management solution">
  <meta name="author" content="Qordoba"/>
  <meta property="og:title" content="Strings Intelligence Platform.."/>
  <meta property="og:site_name" content="Qordoba"/>
  <link rel="prefetch" href="/assets/images/qordoba-white-logo.png" /><link rel="prefetch" href="/assets/images/icons/icn-documentation.svg" /><link rel="prefetch" href="/assets/images/qordobalogoblue.png" /><link rel="dns-prefetch" href="https://buttons.github.io" /><link rel="dns-prefetch" href="https://platform.twitter.com" /><link rel="dns-prefetch" href="https://connect.facebook.net" /><link rel="dns-prefetch" href="//mashape.github.io" />
  <link rel="icon" type="image/x-icon" href="/assets/images/favicon.png"/>
  <link rel="stylesheet" href="/assets/styles.css?v=1528483552"/>
</head>


  <body id="" >
    <header class="site-header">
  <div class="enterprise">
        <div class="container">
       <nav class="enterprise-sites one-half column">
         <ul>
           <li>
             <a href="https://qordoba.com/customers/" target="_blank">Customers</a>
           </li>
           <li>
             <a href="https://qordoba.com/partners/" target="_blank" >Partners</a>
           </li>
         </ul>
       </nav>   
      <nav class="enterprise-contact one-half column">
        <ul>
          <li>
            <a href="https://support.qordoba.com/" target="_blank">Support</a>
          </li>
          <li>
            <a href="http://go.qordoba.com/WF-Request-A-Demo__LP-DevDocs-Header.html">Request Demo</a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
  <!-- .enterprise -->
  <div class="navbar">
    <div class="container">
      <a href="/" class="navbar-brand">
        <img src="/assets/images/qordoba-white-logo.png" alt="Qordoba" style="height: 35px;" >
      </a>
      <button data-toggle="collapse" data-target="#navbar" aria-expanded="true" aria-controls="navbar" class="navbar-toggle">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <nav id="navbar" class="navbar-nav">
        <ul>
          <li>
            <a href="/docs/"  class="active" >Docs</a>
          </li>
          <li>
            <a href="/ecosystem" >Ecosystem</a>
          </li>
          <li>
            <a href="/security/" >Security</a>
          </li>
          <li>
            <a href="https://github.com/Qordobacode/" target="_blank">Code</a>
          </li>
           <li>
            <a href="/api/" >API</a>
          </li>
          <li>
            <a href="/install" class="button button-dark" data-analytics='{"event": "Clicked download", "type": "button", "location": "header"}'>Installation</a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
  <!-- .navbar -->
</header>


    <header class="page-header">
  <div class="container">
    <div class="page-header-icon">
      <img src="/assets/images/icons/icn-documentation.svg" alt="Documentation" />
    </div>
    <div class="page-header-title">
      <h1>Documentation</h1>
      <p>Learn how Qordoba platform empowers your apps</p>
    </div>

    
  </div>
</header>

<div class="container">
  <aside class="page-navigation">
    

    
    <nav>
      
      <h5>Getting Started</h5>
      
      <ul>
        
        
        <li>
          <a href="/docs/0.2.x/getting-started/introduction" >Introduction</a>
          
        </li>
        
        
        <li>
          <a href="/docs/0.2.x/getting-started/personas-definition" >Personas definition</a>
          
        </li>
        
        
        <li>
          <a href="/docs/0.2.x/getting-started/placeholders" >Placeholders</a>
          
        </li>
        
        
        <li>
          <a href="/docs/0.2.x/getting-started/api-libraries" >API libraries</a>
          
        </li>
        
      </ul>
    </nav>
    
    <nav>
      
      <h5>CLI Reference</h5>
      
      <ul>
        
        
        <li>
          <a href="/docs/0.2.x/cli" >Commands</a>
          
          <ul>
            
            
            <li>
              <a href="/docs/0.2.x/cli/#start" >Start</a>
            </li>
            
            
            <li>
              <a href="/docs/0.2.x/cli/#Push" >Push</a>
            </li>
            
            
            <li>
              <a href="/docs/0.2.x/cli/#Pull" >Pull</a>
            </li>
            
            
            <li>
              <a href="/docs/0.2.x/cli/#add" >Add key</a>
            </li>
            
            
            <li>
              <a href="/docs/0.2.x/cli/#reload" >Status</a>
            </li>
            
          </ul>
          
        </li>
        
      </ul>
    </nav>
    
    <nav>
      
      <h5>API endpoints</h5>
      
      <ul>
        
        
        <li>
          <a href="/docs/0.2.x/api/" >Introduction</a>
          
        </li>
        
        
        <li>
          <a href="/docs/0.2.x/api/#supported-content-types" >Supported Content Types</a>
          
        </li>
        
        
        <li>
          <a href="/docs/0.2.x/admin-api/#api-object" >Workspaces</a>
          
          <ul>
            
            
            <li>
              <a href="/docs/0.2.x/admin-api/#list" >List workspaces</a>
            </li>
            
            
            <li>
              <a href="/docs/0.2.x/admin-api/#details" >Workspace details</a>
            </li>
            
            
            <li>
              <a href="/docs/0.2.x/admin-api/#workflow" >Workspace workflow</a>
            </li>
            
          </ul>
          
        </li>
        
        
        <li>
          <a href="/docs/0.2.x/admin-api/#consumer-object" >File</a>
          
          <ul>
            
            
            <li>
              <a href="/docs/0.2.x/admin-api/#create-consumer" >List files</a>
            </li>
            
            
            <li>
              <a href="/docs/0.2.x/admin-api/#retrieve-consumer" >Upload file</a>
            </li>
            
            
            <li>
              <a href="/docs/0.2.x/admin-api/#list-consumers" >Upload file</a>
            </li>
            
            
            <li>
              <a href="/docs/0.2.x/admin-api/#update-consumer" >Export file</a>
            </li>
            
            
            <li>
              <a href="/docs/0.2.x/admin-api/#update-or-create-consumer" >Delete file</a>
            </li>
            
          </ul>
          
        </li>
        
        
        <li>
          <a href="/docs/0.2.x/admin-api/#plugin-configuration-object" >Strings</a>
          
          <ul>
            
            
            <li>
              <a href="/docs/0.2.x/admin-api/#create-plugin-configuration" >Create key</a>
            </li>
            
            
            <li>
              <a href="/docs/0.2.x/admin-api/#list-per-api-plugin-configurations" >List file strings</a>
            </li>
            
            
            <li>
              <a href="/docs/0.2.x/admin-api/#list-all-plugin-configurations" >Update string</a>
            </li>
            
            
            <li>
              <a href="/docs/0.2.x/admin-api/#update-plugin-configuration" >Value by key</a>
            </li>
            
          </ul>
          
        </li>
        
      </ul>
    </nav>
    
  </aside>

  <div class="page-content-container" id="documentation">
    <div class="page-content">
      <div class="content">
        

      <h1 id="qordoba-admin-api">Qordoba Admin API</h1>

<p>Qordoba comes with an <strong>internal</strong> RESTful Admin API for administration purposes.
Requests to the Admin API can be sent to any node in the cluster, and Qordoba will
keep the configuration consistent across all nodes.</p>

<ul>
<li><code>8001</code> is the default port on which the Admin API listens.</li>
<li><code>8444</code> is the default port for HTTPS traffic to the Admin API.</li>
</ul>

<p>This API is designed for internal use and provides full control over Qordoba, so
care should be taken when setting up Qordoba environments to avoid undue public
exposure of this API. See <a href="/docs/0.2.x/secure-admin-api">this document</a> for a discussion
of methods to secure the Admin API.</p>

<h2 id="supported-content-types">Supported Content Types</h2>

<p>The Admin API accepts 2 content types on every endpoint:</p>

<ul>
<li><strong>application/x-www-form-urlencoded</strong></li>
</ul>

<p>Simple enough for basic request bodies, you will probably use it most of the time. Note that when sending nested values, Qordoba expects nested objects to be referenced with dotted keys. Example:</p>
<div class="highlight"><pre><code class="language-" data-lang="">config.limit=10&amp;config.period=seconds
</code></pre></div>
<ul>
<li><strong>application/json</strong></li>
</ul>

<p>Handy for complex bodies (ex: complex plugin configuration), in that case simply send a JSON representation of the data you want to send. Example:</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="nt">"period"</span><span class="p">:</span><span class="w"> </span><span class="s2">"seconds"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h2 id="information-routes">Information routes</h2>

<h3 id="retrieve-node-information">Retrieve node information</h3>

<p>Retrieve generic details about a node.</p>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint get">/</div>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 200 OK
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"hostname"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nt">"lua_version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LuaJIT 2.1.0-alpha"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"plugins"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"available_on_server"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="err">...</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nt">"enabled_in_cluster"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="err">...</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"configuration"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="err">...</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"tagline"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Welcome to Qordoba"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.11.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li><code>available_on_server</code>: Names of plugins that are installed on the node.</li>
<li><code>enabled_in_cluster</code>: Names of plugins that are enabled/configured. That is, the plugins configurations currently in the datastore shared by all Qordoba nodes.</li>
</ul>

<hr>

<h3 id="retrieve-node-status">Retrieve node status</h3>

<p>Retrieve usage information about a node, with some basic information about the connections being processed by the underlying nginx process, and the status of the database connection.</p>

<p>If you want to monitor the Qordoba process, since Qordoba is built on top of nginx, every existing nginx monitoring tool or agent can be used.</p>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint get">/status</div>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 200 OK
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"server"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"total_requests"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="nt">"connections_active"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"connections_accepted"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"connections_handled"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"connections_reading"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nt">"connections_writing"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"connections_waiting"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"database"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"reachable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li><code>server</code>: Metrics about the nginx HTTP/S server.

<ul>
<li><code>total_requests</code>: The total number of client requests.</li>
<li><code>connections_active</code>: The current number of active client connections including Waiting connections.</li>
<li><code>connections_accepted</code>: The total number of accepted client connections.</li>
<li><code>connections_handled</code>: The total number of handled connections. Generally, the parameter value is the same as accepts unless some resource limits have been reached.</li>
<li><code>connections_reading</code>: The current number of connections where Qordoba is reading the request header.</li>
<li><code>connections_writing</code>: The current number of connections where nginx is writing the response back to the client.</li>
<li><code>connections_waiting</code>: The current number of idle client connections waiting for a request.</li>
</ul></li>
<li><code>database</code>: Metrics about the database.

<ul>
<li><code>reachable</code>: A boolean value reflecting the state of the database connection. Please note that this flag <strong>does not</strong> reflect the health of the database itself.</li>
</ul></li>
</ul>

<hr>

<h2 id="api-object">API Object</h2>

<p>The API object describes an API that&#39;s being exposed by Qordoba. Qordoba needs to know how to retrieve the 
API when a consumer is calling it from the Proxy port. Each API object must specify some combination 
of <code>hosts</code>, <code>uris</code>, and <code>methods</code>. Qordoba will proxy all requests to the API to the specified upstream URL.</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1488830759000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"hosts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"example.org"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"http_if_terminated"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"https_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6378122c-a0a1-438d-a5c6-efabae9fb969"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-api"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"preserve_host"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"retries"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="nt">"strip_uri"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"upstream_connect_timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">60000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"upstream_read_timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">60000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"upstream_send_timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">60000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"upstream_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://httpbin.org"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="add-api">Add API</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint post">/apis/</div>

<h4 id="request-body">Request Body</h4>

<table><thead>
<tr>
<th style="text-align: right">Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>name</code></td>
<td>The API name.</td>
</tr>
<tr>
<td style="text-align: right"><code>hosts</code><br><em>semi-optional</em></td>
<td>A comma-separated list of domain names that point to your API. For example: <code>example.com</code>. At least one of <code>hosts</code>, <code>uris</code>, or <code>methods</code> should be specified.</td>
</tr>
<tr>
<td style="text-align: right"><code>uris</code><br><em>semi-optional</em></td>
<td>A comma-separated list of URIs prefixes that point to your API. For example: <code>/my-path</code>. At least one of <code>hosts</code>, <code>uris</code>, or <code>methods</code> should be specified.</td>
</tr>
<tr>
<td style="text-align: right"><code>methods</code><br><em>semi-optional</em></td>
<td>A comma-separated list of HTTP methods that point to your API. For example: <code>GET,POST</code>. At least one of <code>hosts</code>, <code>uris</code>, or <code>methods</code> should be specified.</td>
</tr>
<tr>
<td style="text-align: right"><code>upstream_url</code></td>
<td>The base target URL that points to your API server. This URL will be used for proxying requests. For example: <code>https://example.com</code>.</td>
</tr>
<tr>
<td style="text-align: right"><code>strip_uri</code><br><em>optional</em></td>
<td>When matching an API via one of the <code>uris</code> prefixes, strip that matching prefix from the upstream URI to be requested. Default: <code>true</code>.</td>
</tr>
<tr>
<td style="text-align: right"><code>preserve_host</code><br><em>optional</em></td>
<td>When matching an API via one of the <code>hosts</code> domain names, make sure the request <code>Host</code> header is forwarded to the upstream service. By default, this is <code>false</code>, and the upstream <code>Host</code> header will be extracted from the configured <code>upstream_url</code>.</td>
</tr>
<tr>
<td style="text-align: right"><code>retries</code><br><em>optional</em></td>
<td>The number of retries to execute upon failure to proxy. The default is <code>5</code>.</td>
</tr>
<tr>
<td style="text-align: right"><code>upstream_connect_timeout</code><br><em>optional</em></td>
<td>The timeout in milliseconds for establishing a connection to your upstream service. Defaults to <code>60000</code>.</td>
</tr>
<tr>
<td style="text-align: right"><code>upstream_send_timeout</code><br><em>optional</em></td>
<td>The timeout in milliseconds between two successive write operations for transmitting a request to your upstream service Defaults to <code>60000</code>.</td>
</tr>
<tr>
<td style="text-align: right"><code>upstream_read_timeout</code><br><em>optional</em></td>
<td>The timeout in milliseconds between two successive read operations for transmitting a request to your upstream service Defaults to <code>60000</code>.</td>
</tr>
<tr>
<td style="text-align: right"><code>https_only</code><br><em>optional</em></td>
<td>To be enabled if you wish to only serve an API through HTTPS, on the appropriate port (<code>8443</code> by default). Default: <code>false</code>.</td>
</tr>
<tr>
<td style="text-align: right"><code>http_if_terminated</code><br><em>optional</em></td>
<td>Consider the <code>X-Forwarded-Proto</code> header when enforcing HTTPS only traffic. Default: <code>false</code>.</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 201 Created
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1488830759000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"hosts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"example.org"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"http_if_terminated"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"https_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6378122c-a0a1-438d-a5c6-efabae9fb969"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-api"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"preserve_host"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"retries"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="nt">"strip_uri"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"upstream_connect_timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">60000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"upstream_read_timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">60000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"upstream_send_timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">60000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"upstream_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://httpbin.org"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="retrieve-api">Retrieve API</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint get">/apis/{name or id}</div>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>name or id</code><br><strong>required</strong></td>
<td>The unique identifier <strong>or</strong> the name of the API to retrieve</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 200 OK
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1488830759000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"hosts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"example.org"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"http_if_terminated"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"https_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6378122c-a0a1-438d-a5c6-efabae9fb969"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-api"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"preserve_host"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"retries"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="nt">"strip_uri"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"upstream_connect_timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">60000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"upstream_read_timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">60000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"upstream_send_timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">60000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"upstream_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://httpbin.org"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="list-apis">List APIs</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint get">/apis/</div>

<h4 id="request-querystring-parameters">Request Querystring Parameters</h4>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>id</code><br><em>optional</em></td>
<td>A filter on the list based on the apis <code>id</code> field.</td>
</tr>
<tr>
<td style="text-align: right"><code>name</code><br><em>optional</em></td>
<td>A filter on the list based on the apis <code>name</code> field.</td>
</tr>
<tr>
<td style="text-align: right"><code>upstream_url</code><br><em>optional</em></td>
<td>A filter on the list based on the apis <code>upstream_url</code> field.</td>
</tr>
<tr>
<td style="text-align: right"><code>retries</code><br><em>optional</em></td>
<td>A filter on the list based on the apis <code>retries</code> field.</td>
</tr>
<tr>
<td style="text-align: right"><code>size</code><br><em>optional, default is <strong>100</strong></em></td>
<td>A limit on the number of objects to be returned.</td>
</tr>
<tr>
<td style="text-align: right"><code>offset</code><br><em>optional</em></td>
<td>A cursor used for pagination. <code>offset</code> is an object identifier that defines a place in the list.</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 200 OK
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1488830759000</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hosts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"example.org"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nt">"http_if_terminated"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nt">"https_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6378122c-a0a1-438d-a5c6-efabae9fb969"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-api"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"preserve_host"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nt">"retries"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
            </span><span class="nt">"strip_uri"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nt">"upstream_connect_timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">60000</span><span class="p">,</span><span class="w">
            </span><span class="nt">"upstream_read_timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">60000</span><span class="p">,</span><span class="w">
            </span><span class="nt">"upstream_send_timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">60000</span><span class="p">,</span><span class="w">
            </span><span class="nt">"upstream_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://httpbin.org"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1488830708000</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hosts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"api.com"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nt">"http_if_terminated"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nt">"https_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0924978e-eb19-44a0-9adc-55f20db2f04d"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-api"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"preserve_host"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nt">"retries"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
            </span><span class="nt">"strip_uri"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nt">"upstream_connect_timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
            </span><span class="nt">"upstream_read_timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
            </span><span class="nt">"upstream_send_timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
            </span><span class="nt">"upstream_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://my-api.com"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:8001/apis?size=2&amp;offset=6378122c-a0a1-438d-a5c6-efabae9fb969"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="update-api">Update API</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint patch">/apis/{name or id}</div>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>name or id</code><br><strong>required</strong></td>
<td>The unique identifier <strong>or</strong> the name of the API to update</td>
</tr>
</tbody></table>

<h4 id="request-body">Request Body</h4>

<table><thead>
<tr>
<th style="text-align: right">Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>name</code></td>
<td>The API name.</td>
</tr>
<tr>
<td style="text-align: right"><code>hosts</code><br><em>semi-optional</em></td>
<td>A comma-separated list of domain names that point to your API. For example: <code>example.com</code>. At least one of <code>hosts</code>, <code>uris</code>, or <code>methods</code> should be specified.</td>
</tr>
<tr>
<td style="text-align: right"><code>uris</code><br><em>semi-optional</em></td>
<td>A comma-separated list of URIs prefixes that point to your API. For example: <code>/my-path</code>. At least one of <code>hosts</code>, <code>uris</code>, or <code>methods</code> should be specified.</td>
</tr>
<tr>
<td style="text-align: right"><code>methods</code><br><em>semi-optional</em></td>
<td>A comma-separated list of HTTP methods that point to your API. For example: <code>GET,POST</code>. At least one of <code>hosts</code>, <code>uris</code>, or <code>methods</code> should be specified.</td>
</tr>
<tr>
<td style="text-align: right"><code>upstream_url</code></td>
<td>The base target URL that points to your API server. This URL will be used for proxying requests. For example: <code>https://example.com</code>.</td>
</tr>
<tr>
<td style="text-align: right"><code>strip_uri</code><br><em>optional</em></td>
<td>When matching an API via one of the <code>uris</code> prefixes, strip that matching prefix from the upstream URI to be requested. Default: <code>true</code>.</td>
</tr>
<tr>
<td style="text-align: right"><code>preserve_host</code><br><em>optional</em></td>
<td>When matching an API via one of the <code>hosts</code> domain names, make sure the request <code>Host</code> header is forwarded to the upstream service. By default, this is <code>false</code>, and the upstream <code>Host</code> header will be extracted from the configured <code>upstream_url</code>.</td>
</tr>
<tr>
<td style="text-align: right"><code>retries</code><br><em>optional</em></td>
<td>The number of retries to execute upon failure to proxy. The default is <code>5</code>.</td>
</tr>
<tr>
<td style="text-align: right"><code>upstream_connect_timeout</code><br><em>optional</em></td>
<td>The timeout in milliseconds for establishing a connection to your upstream service. Defaults to <code>60000</code>.</td>
</tr>
<tr>
<td style="text-align: right"><code>upstream_send_timeout</code><br><em>optional</em></td>
<td>The timeout in milliseconds between two successive write operations for transmitting a request to your upstream service Defaults to <code>60000</code>.</td>
</tr>
<tr>
<td style="text-align: right"><code>upstream_read_timeout</code><br><em>optional</em></td>
<td>The timeout in milliseconds between two successive read operations for transmitting a request to your upstream service Defaults to <code>60000</code>.</td>
</tr>
<tr>
<td style="text-align: right"><code>https_only</code><br><em>optional</em></td>
<td>To be enabled if you wish to only serve an API through HTTPS, on the appropriate port (<code>8443</code> by default). Default: <code>false</code>.</td>
</tr>
<tr>
<td style="text-align: right"><code>http_if_terminated</code><br><em>optional</em></td>
<td>Consider the <code>X-Forwarded-Proto</code> header when enforcing HTTPS only traffic. Default: <code>false</code>.</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 200 OK
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1488830759000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"hosts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"updated-example.org"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"http_if_terminated"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"https_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6378122c-a0a1-438d-a5c6-efabae9fb969"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-updated-api"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"preserve_host"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"retries"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="nt">"strip_uri"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"upstream_connect_timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">60000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"upstream_read_timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">60000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"upstream_send_timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">60000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"upstream_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://httpbin.org"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="update-or-create-api">Update Or Create API</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint put">/apis/</div>

<h4 id="request-body">Request Body</h4>

<table><thead>
<tr>
<th style="text-align: right">Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>name</code></td>
<td>The API name.</td>
</tr>
<tr>
<td style="text-align: right"><code>hosts</code><br><em>semi-optional</em></td>
<td>A comma-separated list of domain names that point to your API. For example: <code>example.com</code>. At least one of <code>hosts</code>, <code>uris</code>, or <code>methods</code> should be specified.</td>
</tr>
<tr>
<td style="text-align: right"><code>uris</code><br><em>semi-optional</em></td>
<td>A comma-separated list of URIs prefixes that point to your API. For example: <code>/my-path</code>. At least one of <code>hosts</code>, <code>uris</code>, or <code>methods</code> should be specified.</td>
</tr>
<tr>
<td style="text-align: right"><code>methods</code><br><em>semi-optional</em></td>
<td>A comma-separated list of HTTP methods that point to your API. For example: <code>GET,POST</code>. At least one of <code>hosts</code>, <code>uris</code>, or <code>methods</code> should be specified.</td>
</tr>
<tr>
<td style="text-align: right"><code>upstream_url</code></td>
<td>The base target URL that points to your API server. This URL will be used for proxying requests. For example: <code>https://example.com</code>.</td>
</tr>
<tr>
<td style="text-align: right"><code>strip_uri</code><br><em>optional</em></td>
<td>When matching an API via one of the <code>uris</code> prefixes, strip that matching prefix from the upstream URI to be requested. Default: <code>true</code>.</td>
</tr>
<tr>
<td style="text-align: right"><code>preserve_host</code><br><em>optional</em></td>
<td>When matching an API via one of the <code>hosts</code> domain names, make sure the request <code>Host</code> header is forwarded to the upstream service. By default, this is <code>false</code>, and the upstream <code>Host</code> header will be extracted from the configured <code>upstream_url</code>.</td>
</tr>
<tr>
<td style="text-align: right"><code>retries</code><br><em>optional</em></td>
<td>The number of retries to execute upon failure to proxy. The default is <code>5</code>.</td>
</tr>
<tr>
<td style="text-align: right"><code>upstream_connect_timeout</code><br><em>optional</em></td>
<td>The timeout in milliseconds for establishing a connection to your upstream service. Defaults to <code>60000</code>.</td>
</tr>
<tr>
<td style="text-align: right"><code>upstream_send_timeout</code><br><em>optional</em></td>
<td>The timeout in milliseconds between two successive write operations for transmitting a request to your upstream service Defaults to <code>60000</code>.</td>
</tr>
<tr>
<td style="text-align: right"><code>upstream_read_timeout</code><br><em>optional</em></td>
<td>The timeout in milliseconds between two successive read operations for transmitting a request to your upstream service Defaults to <code>60000</code>.</td>
</tr>
<tr>
<td style="text-align: right"><code>https_only</code><br><em>optional</em></td>
<td>To be enabled if you wish to only serve an API through HTTPS, on the appropriate port (<code>8443</code> by default). Default: <code>false</code>.</td>
</tr>
<tr>
<td style="text-align: right"><code>http_if_terminated</code><br><em>optional</em></td>
<td>Consider the <code>X-Forwarded-Proto</code> header when enforcing HTTPS only traffic. Default: <code>false</code>.</td>
</tr>
</tbody></table>

<p>The behavior of <code>PUT</code> endpoints is the following: if the request payload <strong>does
not</strong> contain an entity&#39;s primary key (<code>id</code> for APIs), the entity will be
created with the given payload. If the request payload <strong>does</strong> contain an
entity&#39;s primary key, the payload will &quot;replace&quot; the entity specified by the
given primary key. If the primary key is <strong>not</strong> that of an existing entity, <code>404
NOT FOUND</code> will be returned.</p>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 201 Created or HTTP 200 OK
</code></pre></div>
<p>See POST and PATCH responses.</p>

<hr>

<h3 id="delete-api">Delete API</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint delete">/apis/{name or id}</div>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>name or id</code><br><strong>required</strong></td>
<td>The unique identifier <strong>or</strong> the name of the API to delete</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 204 No Content
</code></pre></div>
<hr>

<h2 id="consumer-object">Consumer Object</h2>

<p>The Consumer object represents a consumer - or a user - of an API. You can either rely on Qordoba as the primary datastore, or you can map the consumer list with your database to keep consistency between Qordoba and your existing primary datastore.</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"custom_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc123"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="create-consumer">Create Consumer</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint post">/consumers/</div>

<h4 id="request-form-parameters">Request Form Parameters</h4>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>username</code><br><strong>semi-optional</strong></td>
<td>The unique username of the consumer. You must send either this field or <code>custom_id</code> with the request.</td>
</tr>
<tr>
<td style="text-align: right"><code>custom_id</code><br><strong>semi-optional</strong></td>
<td>Field for storing an existing unique ID for the consumer - useful for mapping Qordoba with users in your existing database. You must send either this field or <code>username</code> with the request.</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 201 Created
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4d924084-1adb-40a5-c042-63b19db421d1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"custom_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc123"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="retrieve-consumer">Retrieve Consumer</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint get">/consumers/{username or id}</div>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>username or id</code><br><strong>required</strong></td>
<td>The unique identifier <strong>or</strong> the username of the consumer to retrieve</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 200 OK
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4d924084-1adb-40a5-c042-63b19db421d1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"custom_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc123"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="list-consumers">List Consumers</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint get">/consumers/</div>

<h4 id="request-querystring-parameters">Request Querystring Parameters</h4>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>id</code><br><em>optional</em></td>
<td>A filter on the list based on the consumer <code>id</code> field.</td>
</tr>
<tr>
<td style="text-align: right"><code>custom_id</code><br><em>optional</em></td>
<td>A filter on the list based on the consumer <code>custom_id</code> field.</td>
</tr>
<tr>
<td style="text-align: right"><code>username</code><br><em>optional</em></td>
<td>A filter on the list based on the consumer <code>username</code> field.</td>
</tr>
<tr>
<td style="text-align: right"><code>size</code><br><em>optional, default is <strong>100</strong></em></td>
<td>A limit on the number of objects to be returned.</td>
</tr>
<tr>
<td style="text-align: right"><code>offset</code><br><em>optional</em></td>
<td>A cursor used for pagination. <code>offset</code> is an object identifier that defines a place in the list.</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 200 OK
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4d924084-1adb-40a5-c042-63b19db421d1"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"custom_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc123"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3f924084-1adb-40a5-c042-63b19db421a2"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"custom_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"def345"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386585</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:8001/consumers/?size=2&amp;offset=4d924084-1adb-40a5-c042-63b19db421d1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="update-consumer">Update Consumer</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint patch">/consumers/{username or id}</div>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>username or id</code><br><strong>required</strong></td>
<td>The unique identifier <strong>or</strong> the username of the consumer to update</td>
</tr>
</tbody></table>

<h4 id="request-body">Request Body</h4>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>username</code><br><strong>semi-optional</strong></td>
<td>The unique username of the consumer. You must send either this field or <code>custom_id</code> with the request.</td>
</tr>
<tr>
<td style="text-align: right"><code>custom_id</code><br><strong>semi-optional</strong></td>
<td>Field for storing an existing unique ID for the consumer - useful for mapping Qordoba with users in your existing database. You must send either this field or <code>username</code> with the request.</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 200 OK
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4d924084-1adb-40a5-c042-63b19db421d1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"custom_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"updated_abc123"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="update-or-create-consumer">Update Or Create Consumer</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint put">/consumers/</div>

<h4 id="request-body">Request Body</h4>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>username</code><br><strong>semi-optional</strong></td>
<td>The unique username of the consumer. You must send either this field or <code>custom_id</code> with the request.</td>
</tr>
<tr>
<td style="text-align: right"><code>custom_id</code><br><strong>semi-optional</strong></td>
<td>Field for storing an existing unique ID for the consumer - useful for mapping Qordoba with users in your existing database. You must send either this field or <code>username</code> with the request.</td>
</tr>
</tbody></table>

<p>The behavior of <code>PUT</code> endpoints is the following: if the request payload <strong>does
not</strong> contain an entity&#39;s primary key (<code>id</code> for Consumers), the entity will be
created with the given payload. If the request payload <strong>does</strong> contain an
entity&#39;s primary key, the payload will &quot;replace&quot; the entity specified by the
given primary key. If the primary key is <strong>not</strong> that of an existing entity, <code>404
NOT FOUND</code> will be returned.</p>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 201 Created or HTTP 200 OK
</code></pre></div>
<p>See POST and PATCH responses.</p>

<hr>

<h3 id="delete-consumer">Delete Consumer</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint delete">/consumers/{username or id}</div>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>username or id</code><br><strong>required</strong></td>
<td>The unique identifier <strong>or</strong> the name of the consumer to delete</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 204 No Content
</code></pre></div>
<hr>

<h2 id="plugin-object">Plugin Object</h2>

<p>A Plugin entity represents a plugin configuration that will be executed during
the HTTP request/response lifecycle. It is how you can add functionalities
to APIs that run behind Qordoba, like Authentication or Rate Limiting for
example. You can find more information about how to install and what values
each plugin takes by visiting the <a href="/plugins">Plugins Gallery</a>.</p>

<p>When adding a Plugin Configuration to an API, every request made by a client to
that API will run said Plugin. If a Plugin needs to be tuned to different
values for some specific Consumers, you can do so by specifying the
<code>consumer_id</code> value:</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4d924084-1adb-40a5-c042-63b19db421d1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"api_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5fd1z584-1adb-40a5-c042-63b19db49x21"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"consumer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a3dX2dh2-1adb-40a5-c042-63b19dbx83hF4"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rate-limiting"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"minute"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
        </span><span class="nt">"hour"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>See the <a href="#precedence">Precedence</a> section below for more details.</p>

<h4 id="precedence">Precedence</h4>

<p>Plugins can be added globally (all APIs), on a single API, single Consumer,
or a combination of both an API and a Consumer. Additionally, a given plugin
(e.g. <code>key-auth</code>) will only run once per request, even if it is configured
twice (e.g. globally <em>and</em> on an API).</p>

<p>Therefore, there exists an order of precedence when the same plugin is applied
to different entities with different configurations. This order implies that
such a plugin that is configured twice, will only run once.</p>

<p>The order of precedence is, from highest to lowest:</p>

<ol>
<li>Plugins applied on a combination of an API and a Consumer (if the request is
authenticated).</li>
<li>Plugins applied to a Consumer (if the request is authenticated).</li>
<li>Plugins applied to an API.</li>
<li>Plugins configured to run globally.</li>
</ol>

<p><strong>Example</strong>: if the <code>rate-limiting</code> plugin is applied twice (with different
configurations): for an API (Plugin config A), and for a Consumer (Plugin
config B), then requests authenticating this Consumer will run Plugin config B
and ignore A (2.). However, requests that do not authenticate this Consumer
will fallback to running Plugin config A (3.).</p>

<p>This behavior is particularly useful when the intent is to override the
configuration of a particular plugin (e.g. allow a higher rate limiting) for a
given API or Consumer.</p>

<hr>

<h3 id="add-plugin">Add Plugin</h3>

<p>You can add a plugin in four different ways:</p>

<ul>
<li>For every API and Consumer. Don&#39;t set <code>api_id</code> and <code>consumer_id</code>.</li>
<li>For every API and a specific Consumer. Only set <code>consumer_id</code>.</li>
<li>For every Consumer and a specific API. Only set <code>api_id</code>.</li>
<li>For a specific Consumer and API. Set both <code>api_id</code> and <code>consumer_id</code>.</li>
</ul>

<p>Note that not all plugins allow to specify <code>consumer_id</code>. Check the plugin documentation.</p>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint post">/apis/{name or id}/plugins/</div>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>name or id</code><br><strong>required</strong></td>
<td>The unique identifier <strong>or</strong> the name of the API on which to add a plugin configuration. If you are adding a plugin to every API use the <code>/plugins</code> endpoint instead without specifying an <code>api_id</code>.</td>
</tr>
</tbody></table>

<h4 id="request-body">Request Body</h4>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>name</code></td>
<td>The name of the Plugin that&#39;s going to be added. Currently the Plugin must be installed in every Qordoba instance separately.</td>
</tr>
<tr>
<td style="text-align: right"><code>consumer_id</code><br><em>optional</em></td>
<td>The unique identifier of the consumer that overrides the existing settings for this specific consumer on incoming requests.</td>
</tr>
<tr>
<td style="text-align: right"><code>config.{property}</code></td>
<td>The configuration properties for the Plugin which can be found on the plugins documentation page in the <a href="/plugins">Plugin Gallery</a>.</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 201 Created
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4d924084-1adb-40a5-c042-63b19db421d1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"api_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5fd1z584-1adb-40a5-c042-63b19db49x21"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"consumer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a3dX2dh2-1adb-40a5-c042-63b19dbx83hF4"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rate-limiting"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"minute"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
        </span><span class="nt">"hour"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h2 id="retrieve-plugin">Retrieve Plugin</h2>

<div class="endpoint get">/plugins/{id}</div>

<h4 id="request-querystring-parameters">Request Querystring Parameters</h4>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>id</code><br><strong>required</strong></td>
<td>The unique identifier of the plugin to retrieve</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 200 OK
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4d924084-1adb-40a5-c042-63b19db421d1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"api_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5fd1z584-1adb-40a5-c042-63b19db49x21"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"consumer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a3dX2dh2-1adb-40a5-c042-63b19dbx83hF4"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rate-limiting"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"minute"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
        </span><span class="nt">"hour"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="list-all-plugins">List All Plugins</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint get">/plugins/</div>

<h4 id="request-querystring-parameters">Request Querystring Parameters</h4>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>id</code><br><em>optional</em></td>
<td>A filter on the list based on the <code>id</code> field.</td>
</tr>
<tr>
<td style="text-align: right"><code>name</code><br><em>optional</em></td>
<td>A filter on the list based on the <code>name</code> field.</td>
</tr>
<tr>
<td style="text-align: right"><code>api_id</code><br><em>optional</em></td>
<td>A filter on the list based on the <code>api_id</code> field.</td>
</tr>
<tr>
<td style="text-align: right"><code>consumer_id</code><br><em>optional</em></td>
<td>A filter on the list based on the <code>consumer_id</code> field.</td>
</tr>
<tr>
<td style="text-align: right"><code>size</code><br><em>optional, default is <strong>100</strong></em></td>
<td>A limit on the number of objects to be returned.</td>
</tr>
<tr>
<td style="text-align: right"><code>offset</code><br><em>optional</em></td>
<td>A cursor used for pagination. <code>offset</code> is an object identifier that defines a place in the list.</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 200 OK
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
          </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4d924084-1adb-40a5-c042-63b19db421d1"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"api_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5fd1z584-1adb-40a5-c042-63b19db49x21"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rate-limiting"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"minute"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
              </span><span class="nt">"hour"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nt">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
          </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3f924084-1adb-40a5-c042-63b19db421a2"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"api_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5fd1z584-1adb-40a5-c042-63b19db49x21"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"consumer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a3dX2dh2-1adb-40a5-c042-63b19dbx83hF4"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rate-limiting"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"minute"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
              </span><span class="nt">"hour"</span><span class="p">:</span><span class="w"> </span><span class="mi">20000</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nt">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386585</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:8001/plugins?size=2&amp;offset=4d924084-1adb-40a5-c042-63b19db421d1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="list-plugins-per-api">List Plugins per API</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint get">/apis/{api name or id}/plugins/</div>

<h4 id="request-querystring-parameters">Request Querystring Parameters</h4>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>id</code><br><em>optional</em></td>
<td>A filter on the list based on the <code>id</code> field.</td>
</tr>
<tr>
<td style="text-align: right"><code>name</code><br><em>optional</em></td>
<td>A filter on the list based on the <code>name</code> field.</td>
</tr>
<tr>
<td style="text-align: right"><code>api_id</code><br><em>optional</em></td>
<td>A filter on the list based on the <code>api_id</code> field.</td>
</tr>
<tr>
<td style="text-align: right"><code>consumer_id</code><br><em>optional</em></td>
<td>A filter on the list based on the <code>consumer_id</code> field.</td>
</tr>
<tr>
<td style="text-align: right"><code>size</code><br><em>optional, default is <strong>100</strong></em></td>
<td>A limit on the number of objects to be returned.</td>
</tr>
<tr>
<td style="text-align: right"><code>offset</code><br><em>optional</em></td>
<td>A cursor used for pagination. <code>offset</code> is an object identifier that defines a place in the list.</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 200 OK
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
          </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4d924084-1adb-40a5-c042-63b19db421d1"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"api_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5fd1z584-1adb-40a5-c042-63b19db49x21"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rate-limiting"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"minute"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
              </span><span class="nt">"hour"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nt">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
          </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3f924084-1adb-40a5-c042-63b19db421a2"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"api_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5fd1z584-1adb-40a5-c042-63b19db49x21"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"consumer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a3dX2dh2-1adb-40a5-c042-63b19dbx83hF4"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rate-limiting"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"minute"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
              </span><span class="nt">"hour"</span><span class="p">:</span><span class="w"> </span><span class="mi">20000</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nt">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386585</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:8001/plugins?size=2&amp;offset=4d924084-1adb-40a5-c042-63b19db421d1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="update-plugin">Update Plugin</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint patch">/apis/{api name or id}/plugins/{plugin id}</div>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>api name or id</code><br><strong>required</strong></td>
<td>The unique identifier <strong>or</strong> the name of the API for which to update the plugin configuration</td>
</tr>
<tr>
<td style="text-align: right"><code>plugin id</code><br><strong>required</strong></td>
<td>The unique identifier of the plugin configuration to update on this API</td>
</tr>
</tbody></table>

<h4 id="request-body">Request Body</h4>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>name</code></td>
<td>The name of the Plugin that&#39;s going to be added. Currently the Plugin must be installed in every Qordoba instance separately.</td>
</tr>
<tr>
<td style="text-align: right"><code>consumer_id</code><br><em>optional</em></td>
<td>The unique identifier of the consumer that overrides the existing settings for this specific consumer on incoming requests.</td>
</tr>
<tr>
<td style="text-align: right"><code>config.{property}</code></td>
<td>The configuration properties for the Plugin which can be found on the plugins documentation page in the <a href="/plugins">Plugin Gallery</a>.</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 200 OK
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4d924084-1adb-40a5-c042-63b19db421d1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"api_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5fd1z584-1adb-40a5-c042-63b19db49x21"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"consumer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a3dX2dh2-1adb-40a5-c042-63b19dbx83hF4"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rate-limiting"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"minute"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
        </span><span class="nt">"hour"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="update-or-add-plugin">Update or Add Plugin</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint put">/apis/{api name or id}/plugins/</div>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>api name or id</code><br><strong>required</strong></td>
<td>The unique identifier <strong>or</strong> the name of the API for which to update or create the plugin configuration</td>
</tr>
</tbody></table>

<h4 id="request-body">Request Body</h4>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>name</code></td>
<td>The name of the Plugin that&#39;s going to be added. Currently the Plugin must be installed in every Qordoba instance separately.</td>
</tr>
<tr>
<td style="text-align: right"><code>consumer_id</code><br><em>optional</em></td>
<td>The unique identifier of the consumer that overrides the existing settings for this specific consumer on incoming requests.</td>
</tr>
<tr>
<td style="text-align: right"><code>config.{property}</code></td>
<td>The configuration properties for the Plugin which can be found on the plugins documentation page in the <a href="/plugins">Plugin Gallery</a>.</td>
</tr>
</tbody></table>

<p>The behavior of <code>PUT</code> endpoints is the following: if the request payload <strong>does
not</strong> contain an entity&#39;s primary key (<code>id</code> and <code>name</code> for Plugins), the entity
will be created with the given payload. If the request payload <strong>does</strong> contain
an entity&#39;s primary key, the payload will &quot;replace&quot; the entity specified by the
given primary key. If the primary key is <strong>not</strong> that of an existing entity, <code>404
NOT FOUND</code> will be returned.</p>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 201 Created or HTTP 200 OK
</code></pre></div>
<p>See POST and PATCH responses.</p>

<hr>

<h3 id="delete-plugin">Delete Plugin</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint delete">/apis/{api name or id}/plugins/{plugin id}</div>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>api name or id</code><br><strong>required</strong></td>
<td>The unique identifier <strong>or</strong> the name of the API for which to delete the plugin configuration</td>
</tr>
<tr>
<td style="text-align: right"><code>plugin id</code><br><strong>required</strong></td>
<td>The unique identifier of the plugin configuration to delete on this API</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 204 No Content
</code></pre></div>
<hr>

<h3 id="retrieve-enabled-plugins">Retrieve Enabled Plugins</h3>

<p>Retrieve a list of all installed plugins on the Qordoba node.</p>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint get">/plugins/enabled</div>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 200 OK
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"enabled_plugins"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"jwt"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"acl"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"cors"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"oauth2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tcp-log"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"udp-log"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"file-log"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"http-log"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"key-auth"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"hmac-auth"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"basic-auth"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ip-restriction"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"request-transformer"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"response-transformer"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"request-size-limiting"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"rate-limiting"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"response-ratelimiting"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"aws-lambda"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"bot-detection"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"correlation-id"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"datadog"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"galileo"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ldap-auth"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"loggly"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"runscope"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"statsd"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"syslog"</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="retrieve-plugin-schema">Retrieve Plugin Schema</h3>

<p>Retrieve the schema of a plugin&#39;s configuration. This is useful to understand what fields a plugin accepts, and can be used for building third-party integrations to the Qordoba&#39;s plugin system.</p>

<div class="endpoint get">/plugins/schema/{plugin name}</div>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 200 OK
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"hide_credentials"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"boolean"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"key_names"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"default"</span><span class="p">:</span><span class="w"> </span><span class="s2">"function"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"array"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h2 id="certificate-object">Certificate Object</h2>

<p>A certificate object represents a public certificate/private key pair for an SSL
certificate. These objects are used by Qordoba to handle SSL/TLS termination for
encrypted requests. Certificates are optionally associated with SNI objects to
tie a cert/key pair to one or more hostnames.</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"cert"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN CERTIFICATE-----..."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN RSA PRIVATE KEY-----..."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="add-certificate">Add Certificate</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint post">/certificates/</div>

<h4 id="request-body">Request Body</h4>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>cert</code></td>
<td>PEM-encoded public certificate of the SSL key pair.</td>
</tr>
<tr>
<td style="text-align: right"><code>key</code></td>
<td>PEM-encoded private key of the SSL key pair.</td>
</tr>
<tr>
<td style="text-align: right"><code>snis</code><br><em>optional</em></td>
<td>One or more hostnames to associate with this certificate as an SNI. This is a sugar parameter that will, under the hood, create an SNI object and associate it with this certificate for your convenience.</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 201 Created
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"21b69eab-09d9-40f9-a55e-c4ee47fada68"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cert"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN CERTIFICATE-----..."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN RSA PRIVATE KEY-----..."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"snis"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"example.com"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485521710265</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="retrieve-certificate">Retrieve Certificate</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint get">/certificates/{sni or id}</div>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>SNI or id</code><br><strong>required</strong></td>
<td>The unique identifier <strong>or</strong> an SNI name associated with this certificate.</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 200 OK
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"21b69eab-09d9-40f9-a55e-c4ee47fada68"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cert"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN CERTIFICATE-----..."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN RSA PRIVATE KEY-----..."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"snis"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"example.com"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485521710265</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="list-certificates">List Certificates</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint get">/certificates/</div>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 200 OK
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"21b69eab-09d9-40f9-a55e-c4ee47fada68"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"cert"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN CERTIFICATE-----..."</span><span class="p">,</span><span class="w">
            </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN RSA PRIVATE KEY-----..."</span><span class="p">,</span><span class="w">
            </span><span class="nt">"snis"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"example.com"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485521710265</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6b5b6f71-c0b3-426d-8f3b-8de2c67c816b"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"cert"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN CERTIFICATE-----..."</span><span class="p">,</span><span class="w">
            </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN RSA PRIVATE KEY-----..."</span><span class="p">,</span><span class="w">
            </span><span class="nt">"snis"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"example.org"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485522651185</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="update-certificate">Update Certificate</h3>

<div class="endpoint patch">/certificates/{sni or id}</div>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>SNI or id</code><br><strong>required</strong></td>
<td>The unique identifier <strong>or</strong> an SNI name associated with this certificate.</td>
</tr>
</tbody></table>

<h4 id="request-body">Request Body</h4>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>cert</code></td>
<td>PEM-encoded public certificate of the SSL key pair.</td>
</tr>
<tr>
<td style="text-align: right"><code>key</code></td>
<td>PEM-encoded private key of the SSL key pair.</td>
</tr>
<tr>
<td style="text-align: right"><code>snis</code><br><em>optional</em></td>
<td>One or more hostnames to associate with this certificate as an SNI. This is a sugar parameter that will, under the hood, create an SNI object and associate it with this certificate for your convenience.</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 200 OK
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"21b69eab-09d9-40f9-a55e-c4ee47fada68"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cert"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN CERTIFICATE-----..."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN RSA PRIVATE KEY-----..."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"snis"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"example.com"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485521710265</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="update-or-create-certificate">Update or Create Certificate</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint put">/certificates/</div>

<h4 id="request-body">Request Body</h4>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>cert</code></td>
<td>PEM-encoded public certificate of the SSL key pair.</td>
</tr>
<tr>
<td style="text-align: right"><code>key</code></td>
<td>PEM-encoded private key of the SSL key pair.</td>
</tr>
<tr>
<td style="text-align: right"><code>snis</code><br><em>optional</em></td>
<td>One or more hostnames to associate with this certificate as an SNI. This is a sugar parameter that will, under the hood, create an SNI object and associate it with this certificate for your convenience.</td>
</tr>
</tbody></table>

<p>The behavior of <code>PUT</code> endpoints is the following: if the request payload <strong>does
not</strong> contain an entity&#39;s primary key (<code>id</code> for Certificates), the entity will
be created with the given payload. If the request payload <strong>does</strong> contain an
entity&#39;s primary key, the payload will &quot;replace&quot; the entity specified by the
given primary key. If the primary key is <strong>not</strong> that of an existing entity, <code>404
NOT FOUND</code> will be returned.</p>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 201 Created or HTTP 200 OK
</code></pre></div>
<p>See POST and PATCH responses.</p>

<hr>

<h3 id="delete-certificate">Delete Certificate</h3>

<div class="endpoint delete">/certificates/{sni or id}</div>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>sni or id</code><br><strong>required</strong></td>
<td>The unique identifier <strong>or</strong> an SNI name associated with this certificate.</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 204 No Content
</code></pre></div>
<hr>

<h2 id="sni-objects">SNI Objects</h2>

<p>An SNI object represents a many-to-one mapping of hostnames to a certificate.
That is, a certificate object can have many hostnames associated with it; when
Qordoba receives an SSL request, it uses the SNI field in the Client Hello to
lookup the certificate object based on the SNI associated with the certificate.</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ssl_certificate_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"21b69eab-09d9-40f9-a55e-c4ee47fada68"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="add-sni">Add SNI</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint post">/snis/</div>

<h4 id="request-body">Request Body</h4>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>name</code></td>
<td>The SNI name to associate with the given certificate.</td>
</tr>
<tr>
<td style="text-align: right"><code>ssl_certificate_id</code></td>
<td>The <code>id</code> (a UUID) of the certificate with which to associate the SNI hostname.</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 201 Created
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ssl_certificate_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"21b69eab-09d9-40f9-a55e-c4ee47fada68"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485521710265</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="retrieve-sni">Retrieve SNI</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint get">/snis/{name}</div>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>name</code><br><strong>required</strong></td>
<td>The name of the SNI object.</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 200 OK
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ssl_certificate_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"21b69eab-09d9-40f9-a55e-c4ee47fada68"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485521710265</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="list-snis">List SNIs</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint get">/snis/</div>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 200 OK
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.com"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"ssl_certificate_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"21b69eab-09d9-40f9-a55e-c4ee47fada68"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485521710265</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.org"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"ssl_certificate_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6b5b6f71-c0b3-426d-8f3b-8de2c67c816b"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485521710265</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="update-sni">Update SNI</h3>

<div class="endpoint patch">/snis/{name}</div>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>name</code><br><strong>required</strong></td>
<td>The name of the SNI object.</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 200 OK
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ssl_certificate_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"21b69eab-09d9-40f9-a55e-c4ee47fada68"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485521710265</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="update-or-create-sni">Update or Create SNI</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint put">/snis/</div>

<h4 id="request-body">Request Body</h4>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>name</code></td>
<td>The SNI name to associate with the given certificate.</td>
</tr>
<tr>
<td style="text-align: right"><code>ssl_certificate_id</code></td>
<td>The <code>id</code> (a UUID) of the certificate with which to associate the SNI hostname.</td>
</tr>
</tbody></table>

<p>The behavior of <code>PUT</code> endpoints is the following: if the request payload <strong>does
not</strong> contain an entity&#39;s primary key (<code>name</code> for SNIs), the entity will be
created with the given payload. If the request payload <strong>does</strong> contain an
entity&#39;s primary key, the payload will &quot;replace&quot; the entity specified by the
given primary key. If the primary key is <strong>not</strong> that of an existing entity, <code>404
NOT FOUND</code> will be returned.</p>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 201 Created or HTTP 200 OK
</code></pre></div>
<p>See POST and PATCH responses.</p>

<hr>

<h3 id="delete-sni">Delete SNI</h3>

<div class="endpoint delete">/snis/{name}</div>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>name</code><br><strong>required</strong></td>
<td>The name of the SNI object.</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 204 No Content
</code></pre></div>
<hr>

<h2 id="upstream-objects">Upstream Objects</h2>

<p>The upstream object represents a virtual hostname and can be used to loadbalance 
incoming requests over multiple services (targets). So for example an upstream
named <code>service.v1.xyz</code> with an API object created with an <code>upstream_url=https://service.v1.xyz/some/path</code>.
Requests for this API would be proxied to the targets defined within the upstream.</p>

<p>An upstream also includes a <a href="/docs/0.2.x/health-checks-circuit-breakers">health checker</a>, which is able to
enable and disable targets based on their ability or inability to serve
requests. The configuration for the health checker is stored in the upstream
object, and applies to all of its targets.</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"service.v1.xyz"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"hash_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"hash_fallback"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"healthchecks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"active"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"concurrency"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
            </span><span class="nt">"healthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">302</span><span class="w"> </span><span class="p">],</span><span class="w">
                </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"successes"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"http_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nt">"unhealthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"http_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mi">429</span><span class="p">,</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">501</span><span class="p">,</span><span class="w">
                                   </span><span class="mi">502</span><span class="p">,</span><span class="w"> </span><span class="mi">503</span><span class="p">,</span><span class="w"> </span><span class="mi">504</span><span class="p">,</span><span class="w"> </span><span class="mi">505</span><span class="w"> </span><span class="p">],</span><span class="w">
                </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"tcp_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"timeouts"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"passive"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"healthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">201</span><span class="p">,</span><span class="w"> </span><span class="mi">202</span><span class="p">,</span><span class="w"> </span><span class="mi">203</span><span class="p">,</span><span class="w">
                                   </span><span class="mi">204</span><span class="p">,</span><span class="w"> </span><span class="mi">205</span><span class="p">,</span><span class="w"> </span><span class="mi">206</span><span class="p">,</span><span class="w"> </span><span class="mi">207</span><span class="p">,</span><span class="w">
                                   </span><span class="mi">208</span><span class="p">,</span><span class="w"> </span><span class="mi">226</span><span class="p">,</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w"> </span><span class="mi">301</span><span class="p">,</span><span class="w">
                                   </span><span class="mi">302</span><span class="p">,</span><span class="w"> </span><span class="mi">303</span><span class="p">,</span><span class="w"> </span><span class="mi">304</span><span class="p">,</span><span class="w"> </span><span class="mi">305</span><span class="p">,</span><span class="w">
                                   </span><span class="mi">306</span><span class="p">,</span><span class="w"> </span><span class="mi">307</span><span class="p">,</span><span class="w"> </span><span class="mi">308</span><span class="w"> </span><span class="p">],</span><span class="w">
                </span><span class="nt">"successes"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"unhealthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"http_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mi">429</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">503</span><span class="w"> </span><span class="p">],</span><span class="w">
                </span><span class="nt">"tcp_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"timeouts"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"slots"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="add-upstream">Add upstream</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint post">/upstreams/</div>

<h4 id="request-body">Request Body</h4>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>name</code></td>
<td>This is a hostname like name that can be referenced in an <code>upstream_url</code> field of an <code>api</code>.</td>
</tr>
<tr>
<td style="text-align: right"><code>slots</code><br><em>optional</em></td>
<td>The number of slots in the loadbalancer algorithm (<code>10</code>-<code>65536</code>, defaults to <code>1000</code>).</td>
</tr>
<tr>
<td style="text-align: right"><code>hash_on</code><br><em>optional</em></td>
<td>What to use as hashing input: <code>none</code>, <code>consumer</code>, <code>ip</code>, or <code>header</code> (defaults to <code>none</code> resulting in a weighted-round-robin scheme).</td>
</tr>
<tr>
<td style="text-align: right"><code>hash_fallback</code><br><em>optional</em></td>
<td>What to use as hashing input if the primary <code>hash_on</code> does not return a hash (eg. header is missing, or no consumer identified): <code>none</code>, <code>consumer</code>, <code>ip</code>, or <code>header</code> (defaults to <code>none</code>).</td>
</tr>
<tr>
<td style="text-align: right">`hash_on_header<br><em>semi-optional</em></td>
<td>The header name to take the value from as hash input (only required when <code>hash_on</code> is set to <code>header</code>).</td>
</tr>
<tr>
<td style="text-align: right">`hash_fallback_header<br><em>semi-optional</em></td>
<td>The header name to take the value from as hash input (only required when <code>hash_fallback</code> is set to <code>header</code>).</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.timeout</code><br><em>optional</em></td>
<td>Socket timeout for active health checks (in seconds).</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.concurrency</code><br><em>optional</em></td>
<td>Number of targets to check concurrently in active health checks.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.http_path</code><br><em>optional</em></td>
<td>Path to use in GET HTTP request to run as a probe on active health checks.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.healthy.interval</code><br><em>optional</em></td>
<td>Interval between active health checks for healthy targets (in seconds). A value of zero indicates that active probes for healthy targets should not be performed.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.healthy.http_statuses</code><br><em>optional</em></td>
<td>An array of HTTP statuses to consider a success, indicating healthiness, when returned by a probe in active health checks.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.healthy.successes</code><br><em>optional</em></td>
<td>Number of successes in active probes (as defined by <code>healthchecks.active.healthy.http_statuses</code>) to consider a target healthy.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.unhealthy.interval</code><br><em>optional</em></td>
<td>Interval between active health checks for unhealthy targets (in seconds). A value of zero indicates that active probes for unhealthy targets should not be performed.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.unhealthy.http_statuses</code><br><em>optional</em></td>
<td>An array of HTTP statuses to consider a failure, indicating unhealthiness, when returned by a probe in active health checks.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.unhealthy.tcp_failures</code><br><em>optional</em></td>
<td>Number of TCP failures in active probes to consider a target unhealthy.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.unhealthy.timeouts</code><br><em>optional</em></td>
<td>Number of timeouts in active probes to consider a target unhealthy.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.unhealthy.http_failures</code><br><em>optional</em></td>
<td>Number of HTTP failures in active probes (as defined by <code>healthchecks.active.unhealthy.http_statuses</code>) to consider a target unhealthy.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.passive.healthy.http_statuses</code><br><em>optional</em></td>
<td>An array of HTTP statuses which represent healthiness when produced by proxied traffic, as observed by passive health checks.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.passive.healthy.successes</code><br><em>optional</em></td>
<td>Number of successes in proxied traffic (as defined by <code>healthchecks.passive.healthy.http_statuses</code>) to consider a target healthy, as observed by passive health checks.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.passive.unhealthy.http_statuses</code><br><em>optional</em></td>
<td>An array of HTTP statuses which represent unhealthiness when produced by proxied traffic, as observed by passive health checks.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.passive.unhealthy.tcp_failures</code><br><em>optional</em></td>
<td>Number of TCP failures in proxied traffic to consider a target unhealthy, as observed by passive health checks.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.passive.unhealthy.timeouts</code><br><em>optional</em></td>
<td>Number of timeouts in proxied traffic to consider a target unhealthy, as observed by passive health checks.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.passive.unhealthy.http_failures</code><br><em>optional</em></td>
<td>Number of HTTP failures in proxied traffic (as defined by <code>healthchecks.passive.unhealthy.http_statuses</code>) to consider a target unhealthy, as observed by passive health checks.</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 201 Created
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13611da7-703f-44f8-b790-fc1e7bf51b3e"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"service.v1.xyz"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"hash_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"hash_fallback"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"healthchecks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"active"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"concurrency"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
            </span><span class="nt">"healthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">302</span><span class="w"> </span><span class="p">],</span><span class="w">
                </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"successes"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"http_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nt">"unhealthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"http_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mi">429</span><span class="p">,</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">501</span><span class="p">,</span><span class="w">
                                   </span><span class="mi">502</span><span class="p">,</span><span class="w"> </span><span class="mi">503</span><span class="p">,</span><span class="w"> </span><span class="mi">504</span><span class="p">,</span><span class="w"> </span><span class="mi">505</span><span class="w"> </span><span class="p">],</span><span class="w">
                </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"tcp_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"timeouts"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"passive"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"healthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">201</span><span class="p">,</span><span class="w"> </span><span class="mi">202</span><span class="p">,</span><span class="w"> </span><span class="mi">203</span><span class="p">,</span><span class="w">
                                   </span><span class="mi">204</span><span class="p">,</span><span class="w"> </span><span class="mi">205</span><span class="p">,</span><span class="w"> </span><span class="mi">206</span><span class="p">,</span><span class="w"> </span><span class="mi">207</span><span class="p">,</span><span class="w">
                                   </span><span class="mi">208</span><span class="p">,</span><span class="w"> </span><span class="mi">226</span><span class="p">,</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w"> </span><span class="mi">301</span><span class="p">,</span><span class="w">
                                   </span><span class="mi">302</span><span class="p">,</span><span class="w"> </span><span class="mi">303</span><span class="p">,</span><span class="w"> </span><span class="mi">304</span><span class="p">,</span><span class="w"> </span><span class="mi">305</span><span class="p">,</span><span class="w">
                                   </span><span class="mi">306</span><span class="p">,</span><span class="w"> </span><span class="mi">307</span><span class="p">,</span><span class="w"> </span><span class="mi">308</span><span class="w"> </span><span class="p">],</span><span class="w">
                </span><span class="nt">"successes"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"unhealthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"http_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mi">429</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">503</span><span class="w"> </span><span class="p">],</span><span class="w">
                </span><span class="nt">"tcp_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"timeouts"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"slots"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485521710265</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="retrieve-upstream">Retrieve upstream</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint get">/upstreams/{name or id}</div>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>name or id</code><br><strong>required</strong></td>
<td>The unique identifier <strong>or</strong> the name of the upstream to retrieve</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 200 OK
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13611da7-703f-44f8-b790-fc1e7bf51b3e"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"service.v1.xyz"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"hash_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"hash_fallback"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"healthchecks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"active"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"concurrency"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
            </span><span class="nt">"healthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">302</span><span class="w"> </span><span class="p">],</span><span class="w">
                </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"successes"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"http_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nt">"unhealthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"http_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mi">429</span><span class="p">,</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">501</span><span class="p">,</span><span class="w">
                                   </span><span class="mi">502</span><span class="p">,</span><span class="w"> </span><span class="mi">503</span><span class="p">,</span><span class="w"> </span><span class="mi">504</span><span class="p">,</span><span class="w"> </span><span class="mi">505</span><span class="w"> </span><span class="p">],</span><span class="w">
                </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"tcp_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"timeouts"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"passive"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"healthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">201</span><span class="p">,</span><span class="w"> </span><span class="mi">202</span><span class="p">,</span><span class="w"> </span><span class="mi">203</span><span class="p">,</span><span class="w">
                                   </span><span class="mi">204</span><span class="p">,</span><span class="w"> </span><span class="mi">205</span><span class="p">,</span><span class="w"> </span><span class="mi">206</span><span class="p">,</span><span class="w"> </span><span class="mi">207</span><span class="p">,</span><span class="w">
                                   </span><span class="mi">208</span><span class="p">,</span><span class="w"> </span><span class="mi">226</span><span class="p">,</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w"> </span><span class="mi">301</span><span class="p">,</span><span class="w">
                                   </span><span class="mi">302</span><span class="p">,</span><span class="w"> </span><span class="mi">303</span><span class="p">,</span><span class="w"> </span><span class="mi">304</span><span class="p">,</span><span class="w"> </span><span class="mi">305</span><span class="p">,</span><span class="w">
                                   </span><span class="mi">306</span><span class="p">,</span><span class="w"> </span><span class="mi">307</span><span class="p">,</span><span class="w"> </span><span class="mi">308</span><span class="w"> </span><span class="p">],</span><span class="w">
                </span><span class="nt">"successes"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"unhealthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"http_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mi">429</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">503</span><span class="w"> </span><span class="p">],</span><span class="w">
                </span><span class="nt">"tcp_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"timeouts"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"slots"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485521710265</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="list-upstreams">List upstreams</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint get">/upstreams/</div>

<h4 id="request-querystring-parameters">Request Querystring Parameters</h4>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>id</code><br><em>optional</em></td>
<td>A filter on the list based on the upstream <code>id</code> field.</td>
</tr>
<tr>
<td style="text-align: right"><code>name</code><br><em>optional</em></td>
<td>A filter on the list based on the upstream <code>name</code> field.</td>
</tr>
<tr>
<td style="text-align: right"><code>hash_on</code><br><em>optional</em></td>
<td>A filter on the list based on the upstream <code>hash_on</code> field.</td>
</tr>
<tr>
<td style="text-align: right"><code>hash_fallback</code><br><em>optional</em></td>
<td>A filter on the list based on the upstream <code>hash_fallback</code> field.</td>
</tr>
<tr>
<td style="text-align: right"><code>hash_on_header</code><br><em>optional</em></td>
<td>A filter on the list based on the upstream <code>hash_on_header</code> field.</td>
</tr>
<tr>
<td style="text-align: right"><code>hash_fallback_header</code><br><em>optional</em></td>
<td>A filter on the list based on the upstream <code>hash_fallback_header</code> field.</td>
</tr>
<tr>
<td style="text-align: right"><code>slots</code><br><em>optional</em></td>
<td>A filter on the list based on the upstream <code>slots</code> field.</td>
</tr>
<tr>
<td style="text-align: right"><code>size</code><br><em>optional, default is <strong>100</strong></em></td>
<td>A limit on the number of objects to be returned.</td>
</tr>
<tr>
<td style="text-align: right"><code>offset</code><br><em>optional</em></td>
<td>A cursor used for pagination. <code>offset</code> is an object identifier that defines a place in the list.</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 200 OK
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485521710265</span><span class="p">,</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13611da7-703f-44f8-b790-fc1e7bf51b3e"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"service.v1.xyz"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hash_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hash_fallback"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"healthchecks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"active"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nt">"concurrency"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"healthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nt">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">302</span><span class="w"> </span><span class="p">],</span><span class="w">
                        </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                        </span><span class="nt">"successes"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nt">"http_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"unhealthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nt">"http_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                        </span><span class="nt">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mi">429</span><span class="p">,</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">501</span><span class="p">,</span><span class="w">
                                           </span><span class="mi">502</span><span class="p">,</span><span class="w"> </span><span class="mi">503</span><span class="p">,</span><span class="w"> </span><span class="mi">504</span><span class="p">,</span><span class="w"> </span><span class="mi">505</span><span class="w"> </span><span class="p">],</span><span class="w">
                        </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                        </span><span class="nt">"tcp_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                        </span><span class="nt">"timeouts"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nt">"passive"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nt">"healthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nt">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">201</span><span class="p">,</span><span class="w"> </span><span class="mi">202</span><span class="p">,</span><span class="w"> </span><span class="mi">203</span><span class="p">,</span><span class="w">
                                           </span><span class="mi">204</span><span class="p">,</span><span class="w"> </span><span class="mi">205</span><span class="p">,</span><span class="w"> </span><span class="mi">206</span><span class="p">,</span><span class="w"> </span><span class="mi">207</span><span class="p">,</span><span class="w">
                                           </span><span class="mi">208</span><span class="p">,</span><span class="w"> </span><span class="mi">226</span><span class="p">,</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w"> </span><span class="mi">301</span><span class="p">,</span><span class="w">
                                           </span><span class="mi">302</span><span class="p">,</span><span class="w"> </span><span class="mi">303</span><span class="p">,</span><span class="w"> </span><span class="mi">304</span><span class="p">,</span><span class="w"> </span><span class="mi">305</span><span class="p">,</span><span class="w">
                                           </span><span class="mi">306</span><span class="p">,</span><span class="w"> </span><span class="mi">307</span><span class="p">,</span><span class="w"> </span><span class="mi">308</span><span class="w"> </span><span class="p">],</span><span class="w">
                        </span><span class="nt">"successes"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nt">"unhealthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nt">"http_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                        </span><span class="nt">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mi">429</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">503</span><span class="w"> </span><span class="p">],</span><span class="w">
                        </span><span class="nt">"tcp_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                        </span><span class="nt">"timeouts"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"slots"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485522651185</span><span class="p">,</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"07131005-ba30-4204-a29f-0927d53257b4"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"service.v2.xyz"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hash_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"hash_fallback"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"healthchecks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"active"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nt">"concurrency"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"healthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nt">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">302</span><span class="w"> </span><span class="p">],</span><span class="w">
                        </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
                        </span><span class="nt">"successes"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nt">"http_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/health_status"</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"unhealthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nt">"http_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
                        </span><span class="nt">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mi">429</span><span class="p">,</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">501</span><span class="p">,</span><span class="w">
                                           </span><span class="mi">502</span><span class="p">,</span><span class="w"> </span><span class="mi">503</span><span class="p">,</span><span class="w"> </span><span class="mi">504</span><span class="p">,</span><span class="w"> </span><span class="mi">505</span><span class="w"> </span><span class="p">],</span><span class="w">
                        </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
                        </span><span class="nt">"tcp_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                        </span><span class="nt">"timeouts"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nt">"passive"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nt">"healthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nt">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">201</span><span class="p">,</span><span class="w"> </span><span class="mi">202</span><span class="p">,</span><span class="w"> </span><span class="mi">203</span><span class="p">,</span><span class="w">
                                           </span><span class="mi">204</span><span class="p">,</span><span class="w"> </span><span class="mi">205</span><span class="p">,</span><span class="w"> </span><span class="mi">206</span><span class="p">,</span><span class="w"> </span><span class="mi">207</span><span class="p">,</span><span class="w">
                                           </span><span class="mi">208</span><span class="p">,</span><span class="w"> </span><span class="mi">226</span><span class="p">,</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w"> </span><span class="mi">301</span><span class="p">,</span><span class="w">
                                           </span><span class="mi">302</span><span class="p">,</span><span class="w"> </span><span class="mi">303</span><span class="p">,</span><span class="w"> </span><span class="mi">304</span><span class="p">,</span><span class="w"> </span><span class="mi">305</span><span class="p">,</span><span class="w">
                                           </span><span class="mi">306</span><span class="p">,</span><span class="w"> </span><span class="mi">307</span><span class="p">,</span><span class="w"> </span><span class="mi">308</span><span class="w"> </span><span class="p">],</span><span class="w">
                        </span><span class="nt">"successes"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nt">"unhealthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nt">"http_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
                        </span><span class="nt">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mi">429</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">503</span><span class="w"> </span><span class="p">],</span><span class="w">
                        </span><span class="nt">"tcp_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                        </span><span class="nt">"timeouts"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"slots"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:8001/upstreams?size=2&amp;offset=Mg%3D%3D"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"offset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mg=="</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="update-upstream">Update upstream</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint patch">/upstreams/{name or id}</div>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>name or id</code><br><strong>required</strong></td>
<td>The unique identifier <strong>or</strong> the name of the upstream to update</td>
</tr>
</tbody></table>

<h4 id="request-body">Request Body</h4>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>name</code></td>
<td>This is a hostname like name that can be referenced in an <code>upstream_url</code> field of an <code>api</code>.</td>
</tr>
<tr>
<td style="text-align: right"><code>slots</code><br><em>optional</em></td>
<td>The number of slots in the loadbalancer algorithm (<code>10</code>-<code>65536</code>, defaults to <code>1000</code>).</td>
</tr>
<tr>
<td style="text-align: right"><code>hash_on</code><br><em>optional</em></td>
<td>What to use as hashing input: <code>none</code>, <code>consumer</code>, <code>ip</code>, or <code>header</code> (defaults to <code>none</code> resulting in a weighted-round-robin scheme).</td>
</tr>
<tr>
<td style="text-align: right"><code>hash_fallback</code><br><em>optional</em></td>
<td>What to use as hashing input if the primary <code>hash_on</code> does not return a hash (eg. header is missing, or no consumer identified): <code>none</code>, <code>consumer</code>, <code>ip</code>, or <code>header</code> (defaults to <code>none</code>).</td>
</tr>
<tr>
<td style="text-align: right">`hash_on_header<br><em>semi-optional</em></td>
<td>The header name to take the value from as hash input (only required when <code>hash_on</code> is set to <code>header</code>).</td>
</tr>
<tr>
<td style="text-align: right">`hash_fallback_header<br><em>semi-optional</em></td>
<td>The header name to take the value from as hash input (only required when <code>hash_fallback</code> is set to <code>header</code>).</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.timeout</code><br><em>optional</em></td>
<td>Socket timeout for active health checks (in seconds).</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.concurrency</code><br><em>optional</em></td>
<td>Number of targets to check concurrently in active health checks.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.http_path</code><br><em>optional</em></td>
<td>Path to use in GET HTTP request to run as a probe on active health checks.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.healthy.interval</code><br><em>optional</em></td>
<td>Interval between active health checks for healthy targets (in seconds). A value of zero indicates that active probes for healthy targets should not be performed.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.healthy.http_statuses</code><br><em>optional</em></td>
<td>An array of HTTP statuses to consider a success, indicating healthiness, when returned by a probe in active health checks.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.healthy.successes</code><br><em>optional</em></td>
<td>Number of successes in active probes (as defined by <code>healthchecks.active.healthy.http_statuses</code>) to consider a target healthy.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.unhealthy.interval</code><br><em>optional</em></td>
<td>Interval between active health checks for unhealthy targets (in seconds). A value of zero indicates that active probes for unhealthy targets should not be performed.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.unhealthy.http_statuses</code><br><em>optional</em></td>
<td>An array of HTTP statuses to consider a failure, indicating unhealthiness, when returned by a probe in active health checks.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.unhealthy.tcp_failures</code><br><em>optional</em></td>
<td>Number of TCP failures in active probes to consider a target unhealthy.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.unhealthy.timeouts</code><br><em>optional</em></td>
<td>Number of timeouts in active probes to consider a target unhealthy.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.unhealthy.http_failures</code><br><em>optional</em></td>
<td>Number of HTTP failures in active probes (as defined by <code>healthchecks.active.unhealthy.http_statuses</code>) to consider a target unhealthy.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.passive.healthy.http_statuses</code><br><em>optional</em></td>
<td>An array of HTTP statuses which represent healthiness when produced by proxied traffic, as observed by passive health checks.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.passive.healthy.successes</code><br><em>optional</em></td>
<td>Number of successes in proxied traffic (as defined by <code>healthchecks.passive.healthy.http_statuses</code>) to consider a target healthy, as observed by passive health checks.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.passive.unhealthy.http_statuses</code><br><em>optional</em></td>
<td>An array of HTTP statuses which represent unhealthiness when produced by proxied traffic, as observed by passive health checks.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.passive.unhealthy.tcp_failures</code><br><em>optional</em></td>
<td>Number of TCP failures in proxied traffic to consider a target unhealthy, as observed by passive health checks.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.passive.unhealthy.timeouts</code><br><em>optional</em></td>
<td>Number of timeouts in proxied traffic to consider a target unhealthy, as observed by passive health checks.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.passive.unhealthy.http_failures</code><br><em>optional</em></td>
<td>Number of HTTP failures in proxied traffic (as defined by <code>healthchecks.passive.unhealthy.http_statuses</code>) to consider a target unhealthy, as observed by passive health checks.</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 200 OK
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4d924084-1adb-40a5-c042-63b19db421d1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"service.v1.xyz"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"hash_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"hash_fallback"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"slots"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nt">"healthchecks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"active"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"concurrency"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
            </span><span class="nt">"healthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">302</span><span class="w"> </span><span class="p">],</span><span class="w">
                </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"successes"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"http_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nt">"unhealthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"http_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mi">429</span><span class="p">,</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">501</span><span class="p">,</span><span class="w">
                                   </span><span class="mi">502</span><span class="p">,</span><span class="w"> </span><span class="mi">503</span><span class="p">,</span><span class="w"> </span><span class="mi">504</span><span class="p">,</span><span class="w"> </span><span class="mi">505</span><span class="w"> </span><span class="p">],</span><span class="w">
                </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"tcp_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"timeouts"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"passive"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"healthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">201</span><span class="p">,</span><span class="w"> </span><span class="mi">202</span><span class="p">,</span><span class="w"> </span><span class="mi">203</span><span class="p">,</span><span class="w">
                                   </span><span class="mi">204</span><span class="p">,</span><span class="w"> </span><span class="mi">205</span><span class="p">,</span><span class="w"> </span><span class="mi">206</span><span class="p">,</span><span class="w"> </span><span class="mi">207</span><span class="p">,</span><span class="w">
                                   </span><span class="mi">208</span><span class="p">,</span><span class="w"> </span><span class="mi">226</span><span class="p">,</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w"> </span><span class="mi">301</span><span class="p">,</span><span class="w">
                                   </span><span class="mi">302</span><span class="p">,</span><span class="w"> </span><span class="mi">303</span><span class="p">,</span><span class="w"> </span><span class="mi">304</span><span class="p">,</span><span class="w"> </span><span class="mi">305</span><span class="p">,</span><span class="w">
                                   </span><span class="mi">306</span><span class="p">,</span><span class="w"> </span><span class="mi">307</span><span class="p">,</span><span class="w"> </span><span class="mi">308</span><span class="w"> </span><span class="p">],</span><span class="w">
                </span><span class="nt">"successes"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"unhealthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"http_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mi">429</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">503</span><span class="w"> </span><span class="p">],</span><span class="w">
                </span><span class="nt">"tcp_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"timeouts"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="update-or-create-upstream">Update Or create Upstream</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint put">/upstreams/</div>

<h4 id="request-body">Request Body</h4>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>name</code></td>
<td>This is a hostname like name that can be referenced in an <code>upstream_url</code> field of an <code>api</code>.</td>
</tr>
<tr>
<td style="text-align: right"><code>slots</code><br><em>optional</em></td>
<td>The number of slots in the loadbalancer algorithm (<code>10</code>-<code>65536</code>, defaults to <code>1000</code>).</td>
</tr>
<tr>
<td style="text-align: right"><code>hash_on</code><br><em>optional</em></td>
<td>What to use as hashing input: <code>none</code>, <code>consumer</code>, <code>ip</code>, or <code>header</code> (defaults to <code>none</code> resulting in a weighted-round-robin scheme).</td>
</tr>
<tr>
<td style="text-align: right"><code>hash_fallback</code><br><em>optional</em></td>
<td>What to use as hashing input if the primary <code>hash_on</code> does not return a hash (eg. header is missing, or no consumer identified): <code>none</code>, <code>consumer</code>, <code>ip</code>, or <code>header</code> (defaults to <code>none</code>).</td>
</tr>
<tr>
<td style="text-align: right">`hash_on_header<br><em>semi-optional</em></td>
<td>The header name to take the value from as hash input (only required when <code>hash_on</code> is set to <code>header</code>).</td>
</tr>
<tr>
<td style="text-align: right">`hash_fallback_header<br><em>semi-optional</em></td>
<td>The header name to take the value from as hash input (only required when <code>hash_fallback</code> is set to <code>header</code>).</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.timeout</code><br><em>optional</em></td>
<td>Socket timeout for active health checks (in seconds).</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.concurrency</code><br><em>optional</em></td>
<td>Number of targets to check concurrently in active health checks.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.http_path</code><br><em>optional</em></td>
<td>Path to use in GET HTTP request to run as a probe on active health checks.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.healthy.interval</code><br><em>optional</em></td>
<td>Interval between active health checks for healthy targets (in seconds). A value of zero indicates that active probes for healthy targets should not be performed.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.healthy.http_statuses</code><br><em>optional</em></td>
<td>An array of HTTP statuses to consider a success, indicating healthiness, when returned by a probe in active health checks.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.healthy.successes</code><br><em>optional</em></td>
<td>Number of successes in active probes (as defined by <code>healthchecks.active.healthy.http_statuses</code>) to consider a target healthy.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.unhealthy.interval</code><br><em>optional</em></td>
<td>Interval between active health checks for unhealthy targets (in seconds). A value of zero indicates that active probes for unhealthy targets should not be performed.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.unhealthy.http_statuses</code><br><em>optional</em></td>
<td>An array of HTTP statuses to consider a failure, indicating unhealthiness, when returned by a probe in active health checks.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.unhealthy.tcp_failures</code><br><em>optional</em></td>
<td>Number of TCP failures in active probes to consider a target unhealthy.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.unhealthy.timeouts</code><br><em>optional</em></td>
<td>Number of timeouts in active probes to consider a target unhealthy.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.active.unhealthy.http_failures</code><br><em>optional</em></td>
<td>Number of HTTP failures in active probes (as defined by <code>healthchecks.active.unhealthy.http_statuses</code>) to consider a target unhealthy.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.passive.healthy.http_statuses</code><br><em>optional</em></td>
<td>An array of HTTP statuses which represent healthiness when produced by proxied traffic, as observed by passive health checks.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.passive.healthy.successes</code><br><em>optional</em></td>
<td>Number of successes in proxied traffic (as defined by <code>healthchecks.passive.healthy.http_statuses</code>) to consider a target healthy, as observed by passive health checks.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.passive.unhealthy.http_statuses</code><br><em>optional</em></td>
<td>An array of HTTP statuses which represent unhealthiness when produced by proxied traffic, as observed by passive health checks.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.passive.unhealthy.tcp_failures</code><br><em>optional</em></td>
<td>Number of TCP failures in proxied traffic to consider a target unhealthy, as observed by passive health checks.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.passive.unhealthy.timeouts</code><br><em>optional</em></td>
<td>Number of timeouts in proxied traffic to consider a target unhealthy, as observed by passive health checks.</td>
</tr>
<tr>
<td style="text-align: right"><code>healthchecks.passive.unhealthy.http_failures</code><br><em>optional</em></td>
<td>Number of HTTP failures in proxied traffic (as defined by <code>healthchecks.passive.unhealthy.http_statuses</code>) to consider a target unhealthy, as observed by passive health checks.</td>
</tr>
</tbody></table>

<p>The behavior of <code>PUT</code> endpoints is the following: if the request payload <strong>does
not</strong> contain an entity&#39;s primary key (<code>id</code> for Upstreams), the entity will be
created with the given payload. If the request payload <strong>does</strong> contain an
entity&#39;s primary key, the payload will &quot;replace&quot; the entity specified by the
given primary key. If the primary key is <strong>not</strong> that of an existing entity, <code>404
NOT FOUND</code> will be returned.</p>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 201 Created or HTTP 200 OK
</code></pre></div>
<p>See POST and PATCH responses.</p>

<hr>

<h3 id="delete-upstream">Delete upstream</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint delete">/upstreams/{name or id}</div>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>name or id</code><br><strong>required</strong></td>
<td>The unique identifier <strong>or</strong> the name of the upstream to delete</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 204 No Content
</code></pre></div>
<hr>

<h2 id="target-object">Target Object</h2>

<p>A target is an ip address/hostname with a port that identifies an instance of a backend
service. Every upstream can have many targets, and the targets can be 
dynamically added. Changes are effectuated on the fly.</p>

<p>Because the upstream maintains a history of target changes, the targets cannot
be deleted or modified. To disable a target, post a new one with <code>weight=0</code>;
alternatively, use the <code>DELETE</code> convenience method to accomplish the same.</p>

<p>The current target object definition is the one with the latest <code>created_at</code>.</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.2.3.4:80"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
    </span><span class="nt">"upstream_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ee3310c1-6789-40ac-9386-f79c0cb58432"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="add-target">Add target</h3>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint post">/upstreams/{name or id}/targets</div>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>name or id</code><br><strong>required</strong></td>
<td>The unique identifier <strong>or</strong> the name of the upstream to which to add the target</td>
</tr>
</tbody></table>

<h4 id="request-body">Request Body</h4>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>target</code></td>
<td>The target address (ip or hostname) and port. If omitted the <code>port</code> defaults to <code>8000</code>. If the hostname resolves to an SRV record, the <code>port</code> value will overridden by the value from the dns record.</td>
</tr>
<tr>
<td style="text-align: right"><code>weight</code><br><em>optional</em></td>
<td>The weight this target gets within the upstream loadbalancer (<code>0</code>-<code>1000</code>, defaults to <code>100</code>). If the hostname resolves to an SRV record, the <code>weight</code> value will overridden by the value from the dns record.</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 201 Created
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4661f55e-95c2-4011-8fd6-c5c56df1c9db"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.2.3.4:80"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
    </span><span class="nt">"upstream_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ee3310c1-6789-40ac-9386-f79c0cb58432"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485523507446</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="list-targets">List targets</h3>

<p>Lists all targets currently active on the upstream&#39;s load balancing wheel.</p>

<div class="alert alert-warning">
  <strong>Note:</strong> The behavior of this endpoint changed in the 0.12.0
  release from returning all targets belonging to an upstream, to only
  currently active ones. The endpoint returning the entire history of targets
  was moved to [List all targets](#list-all-targets).
</div>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint get">/upstreams/{name or id}/targets</div>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>name or id</code><br><strong>required</strong></td>
<td>The unique identifier <strong>or</strong> the name of the upstream for which to list the targets</td>
</tr>
</tbody></table>

<h4 id="request-querystring-parameters">Request Querystring Parameters</h4>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>id</code><br><em>optional</em></td>
<td>A filter on the list based on the target <code>id</code> field.</td>
</tr>
<tr>
<td style="text-align: right"><code>target</code><br><em>optional</em></td>
<td>A filter on the list based on the target <code>target</code> field.</td>
</tr>
<tr>
<td style="text-align: right"><code>weight</code><br><em>optional</em></td>
<td>A filter on the list based on the target <code>weight</code> field.</td>
</tr>
<tr>
<td style="text-align: right"><code>size</code><br><em>optional, default is <strong>100</strong></em></td>
<td>A limit on the number of objects to be returned.</td>
</tr>
<tr>
<td style="text-align: right"><code>offset</code><br><em>optional</em></td>
<td>A cursor used for pagination. <code>offset</code> is an object identifier that defines a place in the list.</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 200 OK
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
    </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485524883980</span><span class="p">,</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18c0ad90-f942-4098-88db-bbee3e43b27f"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1:20000"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"upstream_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"07131005-ba30-4204-a29f-0927d53257b4"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485524897232</span><span class="p">,</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9b96f13d-65af-4f30-bbe9-b367121dd26b"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1:20001"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"upstream_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"07131005-ba30-4204-a29f-0927d53257b4"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485524914883</span><span class="p">,</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6c6f34eb-e6c3-4c1f-ac58-4060e5bca890"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1:20002"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"upstream_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"07131005-ba30-4204-a29f-0927d53257b4"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="list-all-targets">List all targets</h3>

<p>Lists all targets of the upstream. Multiple target objects for the same
target may be returned, showing the history of changes for a specific target.
The target object with the latest <code>created_at</code> is the current definition.</p>

<div class="alert alert-warning">
  <strong>Note:</strong> This endpoint is only available with Qordoba 0.12.0+
</div>

<h3 id="endpoint">Endpoint</h3>

<div class="endpoint get">/upstreams/{name or id}/targets/all/</div>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>name or id</code><br><strong>required</strong></td>
<td>The unique identifier <strong>or</strong> the name of the upstream for which to list the targets.</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 200 OK
</code></pre></div><div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485524883980</span><span class="p">,</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18c0ad90-f942-4098-88db-bbee3e43b27f"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1:20000"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"upstream_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"07131005-ba30-4204-a29f-0927d53257b4"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485524914883</span><span class="p">,</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6c6f34eb-e6c3-4c1f-ac58-4060e5bca890"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1:20002"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"upstream_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"07131005-ba30-4204-a29f-0927d53257b4"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<hr>

<h3 id="delete-target">Delete target</h3>

<p>Disable a target in the load balancer. Under the hood, this method creates
a new entry for the given target definition with a <code>weight</code> of 0.</p>

<div class="alert alert-warning">
  <strong>Note:</strong> This endpoint is only available with Qordoba 0.10.1+
</div>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint delete">/upstreams/{upstream name or id}/targets/{target or id}</div>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>upstream name or id</code><br><strong>required</strong></td>
<td>The unique identifier <strong>or</strong> the name of the upstream for which to delete the target.</td>
</tr>
<tr>
<td style="text-align: right"><code>target or id</code><br><strong>required</strong></td>
<td>The host/port combination element of the target to remove, or the <code>id</code> of an existing target entry.</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 204 No Content
</code></pre></div>
<hr>

<h3 id="set-target-as-healthy">Set target as healthy</h3>

<p>Set the current health status of a target in the load balancer to &quot;healthy&quot;
in the entire Qordoba cluster.</p>

<p>This endpoint can be used to manually re-enable a target that was previously
disabled by the upstream&#39;s <a href="/docs/0.2.x/health-checks-circuit-breakers">health checker</a>. Upstreams only
forward requests to healthy nodes, so this call tells Qordoba to start using this
target again.</p>

<p>This resets the health counters of the health checkers running in all workers
of the Qordoba node, and broadcasts a cluster-wide message so that the &quot;healthy&quot;
status is propagated to the whole Qordoba cluster.</p>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint post">/upstreams/{upstream name or id}/targets/{target or id}/healthy</div>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>upstream name or id</code><br><strong>required</strong></td>
<td>The unique identifier <strong>or</strong> the name of the upstream.</td>
</tr>
<tr>
<td style="text-align: right"><code>target or id</code><br><strong>required</strong></td>
<td>The host/port combination element of the target to set as healthy, or the <code>id</code> of an existing target entry.</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 204 No Content
</code></pre></div>
<hr>

<h3 id="set-target-as-unhealthy">Set target as unhealthy</h3>

<p>Set the current health status of a target in the load balancer to &quot;unhealthy&quot;
in the entire Qordoba cluster.</p>

<p>This endpoint can be used to manually disable a target and have it stop
responding to requests. Upstreams only forward requests to healthy nodes, so
this call tells Qordoba to start skipping this target in the ring-balancer
algorithm.</p>

<p>This call resets the health counters of the health checkers running in all
workers of the Qordoba node, and broadcasts a cluster-wide message so that the
&quot;unhealthy&quot; status is propagated to the whole Qordoba cluster.</p>

<p><a href="/docs/0.2.x/health-checks-circuit-breakers/#active-health-checks">Active health checks</a> continue to execute for unhealthy
targets. Note that if active health checks are enabled and the probe detects
that the target is actually healthy, it will automatically re-enable it again.
To permanently remove a target from the ring-balancer, you should <a href="#delete-target">delete a
target</a> instead.</p>

<h4 id="endpoint">Endpoint</h4>

<div class="endpoint post">/upstreams/{upstream name or id}/targets/{target or id}/healthy</div>

<table><thead>
<tr>
<th style="text-align: right">Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right"><code>upstream name or id</code><br><strong>required</strong></td>
<td>The unique identifier <strong>or</strong> the name of the upstream.</td>
</tr>
<tr>
<td style="text-align: right"><code>target or id</code><br><strong>required</strong></td>
<td>The host/port combination element of the target to set as unhealthy, or the <code>id</code> of an existing target entry.</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<div class="highlight"><pre><code class="language-" data-lang="">HTTP 204 No Content
</code></pre></div>

      </div>
    </div>
  </div>
</div>


    
  <!-- section class="section subscribe-section" id="newsletter">
  <div class="container">
    <header class="section-header">
      <h4>Keep up with the latest features</h4>
    </header>

    <div class="row">
      <div class="one-half column offset-by-three">

      </div>
    </div>
  </div>
</section -->


<footer class="marketing-footer--light-gray">
  <section>
    <ul>
      <li class="logo-wrapper">
        <div class="logo">
          <img src="/assets/images/qordobalogoblue.png" alt="Qordoba" >
        </div>
      </li>
      <li>
        <nav>
          <h4>Use Cases</h4>
          <ul>
            <li><a href="#">Strings Management</a></li>
            <li><a href="#">Content AI</a></li>
            <li><a href="#">Localization</a></li>
            <li><a href="#">Persona Based Content</a></li>

          </ul>
        </nav>
      </li>
      <li>
        <nav>
          <h4>Support</h4>
          <ul>
            <li><a href="https://support.qordoba.com/">Knowledge Base</a></li>
            <li><a href="https://dev.qordoba.com/glossary/">Glossary of Qordoba Terms</a></li>
            <li><a href="https://www.youtube.com/channel/UC_ZMLcfNI1XQnV8frpeFsgA">Webinars</a></li>
            <li><a href="https://www.youtube.com/channel/UC_ZMLcfNI1XQnV8frpeFsgA">Tutorials</a></li>
          </ul>
        </nav>
      </li>
      <li>
        <nav>
          <h4>Network Status</h4>
          <ul>
            <li><a href="https://status.qordoba.com/">APIs</a></li>
            <li><a href="https://status.qordoba.com/">SmartSuggest</a></li>
            <li><a href="https://status.qordoba.com/">Emotion and Tone</a></li>
          </ul>
        </nav>
      </li>
      <li>
        <nav>
          <h4>Legal</h4>
          <ul>
            <li><a href="#">Terms of Service</a></li>
            <li><a href="#">Privacy Policy</a></li>
          </ul>
        </nav>
      </li>
    </ul>
  </section>

  <section class="legal">
    <ul>
      <li>
        <span class="mashape-footer-content">&copy; Qordoba. 2018</span>
      </li>
      <li>
        <div class="social-link">
          <a href="https://github.com/Qordobacode" title="Github"><i aria-label="Github" class="fa fa-github" aria-hidden="true"></i></a></div>
        <div class="social-link">
          <a href="https://twitter.com/qordoba" title="Twitter"><i aria-label="Twitter" class="fa fa-twitter" aria-hidden="true"></i></a>
        </div>
      </li>
    </ul>
  </section>
</footer>

    <script>
  var anchorForId = function (id) {
    var anchor = document.createElement("a");
    anchor.className = "header-link";
    anchor.href      = "#" + id;
    anchor.innerHTML = "<span class=\"sr-only\">Permalink</span><i class=\"fa fa-link\"></i>";
    anchor.title = "Permalink";
    return anchor;
  };
  var linkifyAnchors = function (level, containingElement) {
    var headers = containingElement.getElementsByTagName("h" + level);
    for (var h = 0; h < headers.length; h++) {
      var header = headers[h];
      if (typeof header.id !== "undefined" && header.id !== "") {
        header.prepend(anchorForId(header.id));
      }
    }
  };
  document.onreadystatechange = function () {
    if (this.readyState === "complete") {
      console.log("here")
      var contentBlock = document.getElementById("documentation");
      if (!contentBlock) {
        return;
      }
      for (var level = 1; level <= 6; level++) {
        linkifyAnchors(level, contentBlock);
      }
    }
  };
</script>


    <script src="/assets/app.js?v=1528483552"></script>

    <div id="fb-root"></div>

    <script id="github-bjs" src="https://buttons.github.io/buttons.js" async defer></script>
    <script id="twitter-wjs" type="text/javascript" src="https://platform.twitter.com/widgets.js" async defer></script>
    <script id="facebook-jssdk" type="text/javascript" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.3&appId=842731852424506" async defer></script>

    <script type="text/javascript">
      piAId = '393112';
      piCId = '48375';

      (function() {
        function async_load(){
          var s = document.createElement('script'); s.type = 'text/javascript';
          s.src = ('https:' == document.location.protocol ? 'https://pi' : 'http://cdn') + '.pardot.com/pd.js';
          var c = document.getElementsByTagName('script')[0]; c.parentNode.insertBefore(s, c);
        }
        if(window.attachEvent) { window.attachEvent('onload', async_load); }
        else { window.addEventListener('load', async_load, false); }
      })();
    </script>

    <script type='text/javascript'>
      var _vwo_code=(function(){
      var account_id=125292,
      settings_tolerance=2000,
      library_tolerance=2500,
      use_existing_jquery=true,
      // DO NOT EDIT BELOW THIS LINE
      f=false,d=document;return{use_existing_jquery:function(){return use_existing_jquery;},library_tolerance:function(){return library_tolerance;},finish:function(){if(!f){f=true;var a=d.getElementById('_vis_opt_path_hides');if(a)a.parentNode.removeChild(a);}},finished:function(){return f;},load:function(a){var b=d.createElement('script');b.src=a;b.type='text/javascript';b.innerText;b.onerror=function(){_vwo_code.finish();};d.getElementsByTagName('head')[0].appendChild(b);},init:function(){settings_timer=setTimeout('_vwo_code.finish()',settings_tolerance);this.load('//dev.visualwebsiteoptimizer.com/j.php?a='+account_id+'&u='+encodeURIComponent(d.URL)+'&r='+Math.random());var a=d.createElement('style'),b='',h=d.getElementsByTagName('head')[0];a.setAttribute('id','_vis_opt_path_hides');a.setAttribute('type','text/css');if(a.styleSheet)a.styleSheet.cssText=b;else a.appendChild(d.createTextNode(b));h.appendChild(a);return settings_timer;}};}());_vwo_settings_timer=_vwo_code.init();
    </script>

    <script type="text/javascript">
      !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.0.1";
        analytics.load("WDj0nSS7hpyxwL3evgbOzK755s0NUye6");
        analytics.page()
      }}();
    </script>

    <script type="text/javascript" src="//mashape.github.io/notification-bar/embed.js" async defer></script>
  </body>
</html>
